/**
 * V-Pro (Вектор Профи) - Core System
 */

const RULES = {
    ru: [
        {
            id: 'energy_dissonance',
            title: 'Энергетический диссонанс',
            condition: (scores) => scores.B1.norm > 70 && scores.B2.norm < 30,
            description: 'У вас высокие идеалы и ценности, но текущий уровень мотивации не позволяет их реализовать. Похоже, вы знаете "зачем", но пока не нашли "как" зажечь внутренний огонь.'
        },
        {
            id: 'hidden_leader',
            title: 'Скрытый лидер в поиске условий',
            condition: (scores) => scores.B3.norm > 70 && scores.B4.norm < 30,
            description: 'Вы обладаете сильными навыками и потенциалом, но внешняя среда или текущие условия кажутся вам ограничивающими. Вам нужно пространство, где инициатива поощряется.'
        },
        {
            id: 'analytical_dreamer',
            title: 'Аналитический мечтатель',
            condition: (scores) => scores.B6.norm > 75 && scores.B3.norm < 40,
            description: 'Ваша суперсила дает вам масштабное видение, но нехватка конкретных прикладных навыков мешает превратить идеи в результат. Фокус на обучении инструментам — ваш ключ.'
        }
    ],
    kz: [
        {
            id: 'energy_dissonance',
            title: 'Энергетикалық диссонанс',
            condition: (scores) => scores.B1.norm > 70 && scores.B2.norm < 30,
            description: 'Сізде жоғары идеалдар мен құндылықтар бар, бірақ қазіргі мотивация деңгейі оларды жүзеге асыруға мүмкіндік бермейді. Сіз "не үшін" екенін білесіз, бірақ ішкі отты қалай жағу керектігін әлі таппаған сияқтысыз.'
        },
        {
            id: 'hidden_leader',
            title: 'Жағдай іздеген жасырын көшбасшы',
            condition: (scores) => scores.B3.norm > 70 && scores.B4.norm < 30,
            description: 'Сізде күшті дағдылар мен әлеует бар, бірақ сыртқы орта немесе қазіргі жағдайлар сізге шектеулі болып көрінеді. Сізге бастама қолдау табатын кеңістік қажет.'
        },
        {
            id: 'analytical_dreamer',
            title: 'Аналитикалық арманшыл',
            condition: (scores) => scores.B6.norm > 75 && scores.B3.norm < 40,
            description: 'Сіздің суперкүшіңіз сізге кең көзқарас береді, бірақ нақты қолданбалы дағдылардың жетіспеушілігі идеяларды нәтижеге айналдыруға кедергі келтіреді. Құралдарды үйренуге назар аудару — сіздің басты кілтіңіз.'
        }
    ]
};

const TRANSLATIONS = {
    ru: {
        welcomeTitle: "Твой вектор в будущее Казахстана",
        welcomeSubtitle: "Строго научный подход к выбору профессии для учеников 8–10 классов.",
        feat1: "Математический анализ интересов",
        feat2: "Актуально для рынка РК 2026",
        feat3: "15 минут до результата",
        startBtn: "Начать диагностику",
        likert: [
            "Категорически не согласен",
            "Скорее не согласен",
            "Нейтрально",
            "Скорее согласен",
            "Полностью согласен"
        ],
        resultTitle: "Твой профессиональный профиль",
        page2Title: "Психологический портрет и уникальные черты",
        page3Title: "Карта образования и ЕНТ",
        blockNames: {
            'B1': 'Ценности',
            'B2': 'Мотивация',
            'B3': 'Навыки',
            'B4': 'Среда',
            'B5': 'Предмет',
            'B6': 'Суперсила'
        },
        profileTypeLabel: "Тип профиля",
        superpowerLabel: "Суперсила",
        superpowerDesc: "Уровень развития ключевых компетенций",
        microtalentsLabel: "Микроталанты",
        featuresLabel: "Особенности",
        restartBtn: "Пройти заново",
        downloadBtn: "Скачать PDF-отчет",
        report: {
            summaryTitle: "Сводка результатов",
            analysisTitle: "Детальный анализ",
            recommendationsTitle: "Рекомендации и профессии",
            scoreLabel: "Средний балл",
            interpretations: {
                B1: {
                    high: "У вас четко сформированная система ценностей. Вы ориентированы на долгосрочные цели и этические принципы.",
                    low: "Ваши ценности находятся в процессе формирования. Это время для поиска внутренних ориентиров."
                },
                B2: {
                    high: "Ваши интересы разнообразны и активны. Вы легко вовлекаетесь в новые проекты.",
                    low: "Вы предпочитаете фокусироваться на узком круге проверенных задач."
                },
                B3: {
                    high: "Высокий уровень внутренней мотивации. Вы готовы преодолевать трудности ради результата.",
                    low: "Вам требуется внешняя поддержка и четкие стимулы для продуктивной работы."
                },
                B4: {
                    high: "Вы обладаете развитыми навыками адаптации и коммуникации.",
                    low: "Вам комфортнее работать в стабильной и предсказуемой среде."
                },
                B5: {
                    high: "Вы четко понимаете, какая рабочая среда вам подходит лучше всего.",
                    low: "Вы открыты к различным форматам работы и поискам своего места."
                },
                B6: {
                    high: "Ваша суперсила ярко выражена. Это ваш главный рычаг успеха.",
                    low: "Ваши таланты универсальны, важно найти сферу их применения."
                }
            },
            profs: {
                'B1B2': ["HR-директор", "Социальный предприниматель", "Дипломат"],
                'B2B3': ["Data Scientist", "Инженер-исследователь", "Архитектор систем"],
                'B3B4': ["Project Manager", "Стартап-основатель", "Креативный директор"],
                'B4B5': ["Аналитик бизнес-процессов", "Юрист", "Финансовый аудитор"],
                'B5B6': ["R&D Инженер", "Ученый", "Продуктовый дизайнер"],
                'B6B1': ["Журналист", "Психолог", "Преподаватель высшей школы"]
            }
        },
        microtalents: {
            51: "Публичные выступления",
            52: "Аналитика",
            53: "Эстетика",
            54: "Эмпатия",
            55: "Стрессоустойчивость",
            56: "Лидерство",
            57: "Внимательность",
            58: "Стратегическое мышление",
            59: "Креативность",
            60: "Настойчивость"
        }
    },
    kz: {
        welcomeTitle: "Қазақстанның болашағына бағытың",
        welcomeSubtitle: "8–10 сынып оқушылары үшін мамандық таңдауға қатаң ғылыми көзқарас.",
        feat1: "Қызығушылықтардың математикалық талдауы",
        feat2: "ҚР 2026 нарығы үшін өзекті",
        feat3: "Нәтижеге дейін 15 минут",
        startBtn: "Диагностиканы бастау",
        likert: [
            "Мүлдем келіспеймін",
            "Келіспеймін",
            "Бейтарап",
            "Келісемін",
            "Толық келісемін"
        ],
        resultTitle: "Сенің кәсіби профилің",
        page2Title: "Психологиялық портрет және бірегей қасиеттер",
        page3Title: "Білім картасы және ҰБТ",
        blockNames: {
            'B1': 'Құндылықтар',
            'B2': 'Мотивация',
            'B3': 'Дағдылар',
            'B4': 'Орта',
            'B5': 'Пән',
            'B6': 'Суперкүш'
        },
        profileTypeLabel: "Профиль түрі",
        superpowerLabel: "Суперкүш",
        superpowerDesc: "Негізгі құзыреттердің даму деңгейі",
        microtalentsLabel: "Микроталанттар",
        featuresLabel: "Ерекшеліктер",
        restartBtn: "Қайта өту",
        downloadBtn: "PDF-есепті жүктеу",
        report: {
            summaryTitle: "Нәтижелер жиынтығы",
            analysisTitle: "Егжей-тегжейлі талдау",
            recommendationsTitle: "Ұсыныстар мен мамандықтар",
            scoreLabel: "Орташа балл",
            interpretations: {
                B1: {
                    high: "Сізде нақты қалыптасқан құндылықтар жүйесі бар. Сіз ұзақ мерзімді мақсаттар мен этикалық ұстанымдарға бағытталғансыз.",
                    low: "Сіздің құндылықтарыңыз қалыптасу үстінде. Бұл ішкі бағдарларды іздеу уақыты."
                },
                B2: {
                    high: "Сіздің қызығушылықтарыңыз әртүрлі және белсенді. Сіз жаңа жобаларға оңай араласасыз.",
                    low: "Сіз тексерілген тапсырмалардың тар шеңберіне назар аударғанды жөн көресіз."
                },
                B3: {
                    high: "Ішкі мотивацияның жоғары деңгейі. Сіз нәтиже үшін қиындықтарды жеңуге дайынсыз.",
                    low: "Өнімді жұмыс істеу үшін сізге сыртқы қолдау мен нақты ынталандыру қажет."
                },
                B4: {
                    high: "Сізде бейімделу және коммуникация дағдылары жақсы дамыған.",
                    low: "Сізге тұрақты және болжамды ортада жұмыс істеу ыңғайлырақ."
                },
                B5: {
                    high: "Сіз өзіңізге қандай жұмыс ортасы ең қолайлы екенін нақты түсінесіз.",
                    low: "Сіз жұмыстың әртүрлі форматтарына және өз орныңызды іздеуге ашықсыз."
                },
                B6: {
                    high: "Сіздің суперкүшіңіз айқын көрінеді. Бұл сіздің жетістікке жетудегі басты тетігіңіз.",
                    low: "Сіздің таланттарыңыз әмбебап, оларды қолдану саласын табу маңызды."
                }
            },
            profs: {
                'B1B2': ["HR-директор", "Әлеуметтік кәсіпкер", "Дипломат"],
                'B2B3': ["Data Scientist", "Инженер-зерттеуші", "Жүйелік архитектор"],
                'B3B4': ["Project Manager", "Стартап негізін қалаушы", "Креативті директор"],
                'B4B5': ["Бизнес-процестер аналитигі", "Заңгер", "Қаржылық аудитор"],
                'B5B6': ["R&D инженері", "Ғалым", "Өнім дизайнері"],
                'B6B1': ["Журналист", "Психолог", "Жоғары мектеп оқытушысы"]
            }
        },
        microtalents: {
            51: "Көпшілік алдында сөйлеу",
            52: "Аналитика",
            53: "Эстетика",
            54: "Эмпатия",
            55: "Стреске төзімділік",
            56: "Көшбасшылық",
            57: "Зейінділік",
            58: "Стратегиялық ойлау",
            59: "Креативтілік",
            60: "Табандылық"
        }
    }
};

const QUESTIONS_DATA = [
    // ---------------- 1-блок: Ценности / Values ---------------- 
    { 
        id: 1, block: 'B1', 
        ru: "Безопасность моей семьи и близких — мой главный приоритет.", 
        kz: "Отбасым мен жақындарымның амандығы — менің басты басымдығым.", 
        impact: { ru: "ставить безопасность семьи выше всего", kz: "отбасы қауіпсіздігін бәрінен жоғары қою" },
        nuances: {
            ru: { 1: "ставить личную свободу выше семейных обязательств", 2: "стремиться к независимости при сохранении важности семьи", 3: "искать баланс между домом и личными целями", 4: "видеть в семье свою главную опору", 5: "считать безопасность близких фундаментом всех решений" },
            kz: { 1: "жеке бостандықты отбасылық міндеттерден жоғары қою", 2: "отбасы маңыздылығын сақтай отырып, тәуелсіздікке ұмтылу", 3: "үй мен жеке мақсаттар арасындағы тепе-теңдікті іздеу", 4: "отбасын өзінің басты тірегі ретінде көру", 5: "жақындарының қауіпсіздігін барлық шешімдердің негізі деп санау" }
        }
    },
    { 
        id: 2, block: 'B1', 
        ru: "При принятии решений я опираюсь на воспитание родителей и традиции.", 
        kz: "Шешім қабылдағанда ата-ана тәрбиесі мен дәстүрге сүйенемін.", 
        impact: { ru: "опираться на традиции и воспитание", kz: "дәстүр мен тәрбиеге сүйену" },
        nuances: {
            ru: { 1: "ставить под сомнение авторитеты и искать свой путь", 2: "ценить традиции, но предпочитать гибкий подход", 3: "уважать опыт прошлого, адаптируя его под современность", 4: "считать воспитание родителей важным моральным компасом", 5: "видеть в преемственности поколений основу своей жизни" },
            kz: { 1: "беделді тұлғаларға күмәнмен қарап, өз жолыңызды іздеу", 2: "дәстүрлерді бағалау, бірақ икемді тәсілді қалау", 3: "өткеннің тәжірибесін құрметтеп, оны заманға сай бейімдеу", 4: "ата-ана тәрбиесін маңызды адамгершілік бағдаршамы деп санау", 5: "ұрпақтар сабақтастығынан өз өмірінің негізін көру" }
        }
    },
    { 
        id: 3, block: 'B1', 
        ru: "Сохранение культуры, языка и истории моей страны важно для меня.", 
        kz: "Өз елімнің мәдениетін, тілін және тарихын сақтау мен үшін маңызды.", 
        impact: { ru: "сохранять культурное наследие и патриотизм", kz: "мәдени мұра мен патриотизмді сақтау" },
        nuances: {
            ru: { 1: "чувствовать себя гражданином мира, свободным от границ", 2: "уважать культуру, не считая её определяющим фактором", 3: "сохранять баланс между глобальным и национальным", 4: "активно интересоваться историей и культурными корнями", 5: "считать патриотизм и сохранение идентичности своей миссией" },
            kz: { 1: "өзіңізді шекаралардан еркін, әлем азаматы ретінде сезіну", 2: "мәдениетті құрметтеу, оны анықтаушы фактор деп санамау", 3: "жаһандық және ұлттық құндылықтар арасындағы тепе-теңдікті сақтау", 4: "тарих пен мәдени тамырларға белсенді қызығушылық таныту", 5: "патриотизм мен бірегейлікті сақтауды өз миссиясы деп санау" }
        }
    },
    { 
        id: 4, block: 'B1', 
        ru: "Я больше доверяю своей интуиции, чем logicе.", 
        kz: "Логикадан гөрі өз ішкі түйсігіме (интуиция) көбірек сенемін.", 
        impact: { ru: "доверять интуиции при принятии решений", kz: "шешім қабылдағанда түйсікке сену" },
        nuances: {
            ru: { 1: "полагаться исключительно на факты и строгую логику", 2: "считать логический анализ важнее предчувствий", 3: "сочетать интуитивное озарение с расчетом", 4: "использовать интуицию для принятия верных решений", 5: "считать внутренний голос самым надежным советником" },
            kz: { 1: "тек фактілерге және қатаң логикаға сүйену", 2: "логикалық талдауды алдын ала сезінуден маңыздырақ санау", 3: "ішкі түйсік пен есепті ұштастыру", 4: "дұрыс шешім қабылдау үшін интуицияны пайдалану", 5: "ішкі дауысты ең сенімді кеңесші деп санау" }
        }
    },
    { 
        id: 5, block: 'B1', 
        ru: "Чистота души и честность для меня важнее материального богатства.", 
        kz: "Жан тазалығы мен адалдық мен үшін материалдық байлықтан жоғары.", 
        impact: { ru: "ставить честность выше материального достатка", kz: "адалдықты материалдық әл-ауқаттан жоғары қою" },
        nuances: {
            ru: { 1: "быть прагматиком и считать финансовый успех мерилом", 2: "стремиться к достатку, допуская компромиссы в идеалах", 3: "искать баланс между этикой и благополучием", 4: "видеть в честности залог душевного спокойствия", 5: "считать нравственные идеалы абсолютно непоколебимыми" },
            kz: { 1: "прагматик болу және қаржылық табысты өлшем деп санау", 2: "идеалдарда ымыраға келе отырып, ауқаттылыққа ұмтылу", 3: "этика мен әл-ауқат арасындағы тепе-теңдікті іздеу", 4: "адалдықтан жан тыныштығының кепілін көру", 5: "адамгершілік идеалдарын мүлдем мызғымас деп санау" }
        }
    },
    { 
        id: 6, block: 'B1', 
        ru: "При любых обстоятельствах я хочу оставаться верным себе.", 
        kz: "Қандай жағдай болмасын, өз-өзіме адал болып қалуды қалаймын.", 
        impact: { ru: "сохранять верность собственным принципам", kz: "өз ұстанымдарына адалдықты сақтау" },
        nuances: {
            ru: { 1: "быть готовым менять взгляды ради успеха и выгоды", 2: "проявлять гибкость в убеждениях и легко адаптироваться", 3: "сохранять ядро личности, меняя детали", 4: "считать свои принципы основой уникальности", 5: "ставить целостность личности выше любого признания" },
            kz: { 1: "табыс пен пайда үшін көзқарастарды өзгертуге дайын болу", 2: "сенімдерде икемділік таныту және оңай бейімделу", 3: "бөлшектерді өзгерте отырып, тұлғаның өзегін сақтау", 4: "өз ұстанымдарын бірегейлік негізі деп санау", 5: "тұлғаның тұтастығын кез келген мойындаудан жоғары қою" }
        }
    },
    { 
        id: 7, block: 'B1', 
        ru: "Внутренний покой и гармония — это моё понимание счастья.", 
        kz: "Ішкі тыныштық пен үйлесім — менің бақыт туралы түсінігім.", 
        impact: { ru: "стремиться к внутренней гармонии", kz: "ішкі үйлесімге ұмтылу" },
        nuances: {
            ru: { 1: "заряжаться от внешнего успеха и активной деятельности", 2: "видеть в покое лишь временную передышку", 3: "ценить баланс между активностью и тишиной", 4: "использовать ясность ума как основной ресурс", 5: "считать, что внутренняя гармония определяет успех во всем" },
            kz: { 1: "сыртқы табыс пен белсенді қызметтен қуат алу", 2: "тыныштықты тек уақытша тынығу деп көру", 3: "белсенділік пен тыныштық арасындағы тепе-теңдікті бағалау", 4: "ақыл-ойдың анықтығын негізгі ресурс ретінде пайдалану", 5: "ішкі үйлесімділік барлық нәрседегі табысты анықтайды деп санау" }
        }
    },
    { 
        id: 8, block: 'B1', 
        ru: "Я не занимаюсь работой, противоречащей моим принципам.", 
        kz: "Өз ұстанымдарыма қайшы келетін жұмыспен айналыспаймын.", 
        impact: { ru: "проявлять принципиальность в выборе деятельности", kz: "іс-әрекет таңдауда ұстанымдылық таныту" },
        nuances: {
            ru: { 1: "считать работу просто способом заработка", 2: "быть готовым отодвинуть принципы ради карьеры", 3: "выбирать максимально экологичные для себя сферы", 4: "искать совпадение ценностей компании со своими", 5: "видеть в деятельности прямое продолжение убеждений" },
            kz: { 1: "жұмысты тек ақша табудың жолы деп санау", 2: "мансап үшін ұстанымдарды шетке ысыруға дайын болу", 3: "өзіңіз үшін барынша «таза» салаларды таңдау", 4: "компания құндылықтарының өзіңіздікімен сәйкес келуін іздеу", 5: "қызметтен сенімдердің тікелей жалғасын көру" }
        }
    },
    { 
        id: 9, block: 'B1', 
        ru: "Я чувствую ответственность не только за себя, но и за окружающих.", 
        kz: "Тек өзім үшін емес, айналамдағы жандар үшін де жауапкершілік сезінемін.", 
        impact: { ru: "нести социальную ответственность", kz: "әлеуметтік жауапкершілік көтеру" },
        nuances: {
            ru: { 1: "фокусироваться исключительно на личных интересах", 2: "помогать только в рамках прямых обязанностей", 3: "осознавать свое влияние на ближайшее окружение", 4: "приносить пользу своей команде и сообществу", 5: "чувствовать глубокую сопричастность к судьбам других" },
            kz: { 1: "тек жеке мүдделерге назар аудару", 2: "тек тікелей міндеттер шеңберінде көмектесу", 3: "жақын ортаға тигізетін әсерді түсіну", 4: "өз командасы мен қауымдастығына пайда әкелу", 5: "басқалардың тағдырына терең жанашырлық сезіну" }
        }
    },
    { 
        id: 10, block: 'B1', 
        ru: "Я хочу, чтобы моя будущая работа приносила реальную пользу обществу.", 
        kz: "Болашақ жұмысым қоғамға нақты пайда әкелгенін қалаймын.", 
        impact: { ru: "приносить общественную пользу через работу", kz: "жұмыс арқылы қоғамдық пайда әкелу" },
        nuances: {
            ru: { 1: "искать личный комфорт и высокую оплату труда", 2: "считать пользу обществу необязательным бонусом", 3: "стремиться к тому, чтобы работа была востребована", 4: "видеть позитивный след от своей деятельности", 5: "считать служение обществу смыслом профессиональной жизни" },
            kz: { 1: "жеке жайлылық пен жоғары жалақы іздеу", 2: "қоғамға пайда тигізуді міндетті емес бонус деп санау", 3: "жұмыстың сұранысқа ие болуына ұмтылу", 4: "өз қызметінен оң із көру", 5: "қоғамға қызмет етуді кәсіби өмірдің мәні деп санау" }
        }
    },

    // ---------------- 2-блок: Интересы / Interests ---------------- 
    { 
        id: 11, block: 'B2', 
        ru: "Мне нравится помогать людям и решать их проблемы.", 
        kz: "Адамдарға көмектесу және олардың мәселесін шешу маған ұнайды.", 
        impact: { ru: "помогать людям и решать их проблемы", kz: "адамдарға көмектесу және мәселелерді шешу" },
        nuances: {
            ru: { 1: "предпочитать работу с техникой или данными", 2: "помогать только по необходимости", 3: "чувствовать себя полезным в конкретных ситуациях", 4: "считать помощь другим важной частью мотивации", 5: "видеть свое призвание в улучшении жизни людей" },
            kz: { 1: "техникамен немесе деректермен жұмыс істеуді қалау", 2: "тек қажеттілік бойынша көмектесу", 3: "нақты жағдайларда пайдалы екенін сезіну", 4: "басқаларға көмектесуді мотивацияның маңызды бөлігі деп санау", 5: "адамдардың өмірін жақсартудан өз тағдырын көру" }
        }
    },
    { 
        id: 12, block: 'B2', 
        ru: "Мне интересно работать с числами, данными и искать закономерности.", 
        kz: "Сандармен, деректермен жұмыс істеу және заңдылықтар іздеу қызықты.", 
        impact: { ru: "анализировать данные и искать закономерности", kz: "деректерді талдау және заңдылықтарды іздеу" },
        nuances: {
            ru: { 1: "предпочитать творческие задачи без расчетов", 2: "использовать данные только как инструмент", 3: "работать с базовой аналитикой и отчетами", 4: "использовать цифры как основной способ понимания мира", 5: "видеть структуру в любом хаосе данных" },
            kz: { 1: "есептеулерсіз шығармашылық тапсырмаларды қалау", 2: "деректерді тек құрал ретінде пайдалану", 3: "негізгі аналитикамен және есептермен жұмыс істеу", 4: "сандарды әлемді түсінудің негізгі тәсілі ретінде пайдалану", 5: "кез келген деректер хаосынан құрылымды көру" }
        }
    },
    { 
        id: 13, block: 'B2', 
        ru: "Я предпочитаю придумывать новые идеи, а не следовать шаблонам.", 
        kz: "Дайын қалыптан гөрі, жаңа идеялар мен тәсілдер ойлап тапқанды ұнатамын.", 
        impact: { ru: "придумывать новые идеи и инновации", kz: "жаңа идеялар мен инновацияларды ойлап табу" },
        nuances: {
            ru: { 1: "ценить стабильность и проверенные временем инструкции", 2: "работать в рамках заданных стандартов", 3: "быть готовым к инновациям при их обоснованности", 4: "часто искать новые пути и решения", 5: "не терпеть никаких шаблонов и ограничений" },
            kz: { 1: "тұрақтылықты және уақытпен тексерілген нұсқаулықтарды бағалау", 2: "белгіленген стандарттар шеңберінде жұмыс істеуді қалау", 3: "негізделген болса, инновацияларға дайын болу", 4: "жиі жаңа жолдар мен шешімдерді іздеу", 5: "ешқандай қалыптар мен шектеулерге төзбеу" }
        }
    },
    { 
        id: 14, block: 'B2', 
        ru: "Мне важно видеть результат своей работы в конкретной форме (продукт, результат).", 
        kz: "Еңбегімнің нәтижесін нақты зат (өнім) түрінде көрген мен үшін маңызды.", 
        impact: { ru: "создавать осязаемые продукты и результаты", kz: "нақты өнімдер мен нәтижелерді жасау" },
        nuances: {
            ru: { 1: "предпочитать процесс или работу с абстрактными идеями", 2: "считать материальное воплощение второстепенным", 3: "ценить завершенность задач в любой форме", 4: "стремиться к осязаемому итогу своих усилий", 5: "считать работу завершенной только при наличии продукта" },
            kz: { 1: "процесті немесе дерексіз идеялармен жұмыс істеуді қалау", 2: "материалдық нәтижені екінші кезектегі нәрсе деп санау", 3: "кез келген нысандағы тапсырмалардың аяқталуын бағалау", 4: "өз күш-жігерінің сезілетін нәтижесі болуына ұмтылу", 5: "дайын өнім болғанда ғана жұмысты аяқталған деп санау" }
        }
    },
    { 
        id: 15, block: 'B2', 
        ru: "Планирование процессов и организация людей меня вдохновляют.", 
        kz: "Үдерістерді жоспарлау және адамдарды ұйымдастыру мені шабыттандырады.", 
        impact: { ru: "организовывать людей и планировать процессы", kz: "адамдарды ұйымдастыру және үдерістерді жоспарлау" },
        nuances: {
            ru: { 1: "быть исполнителем и отвечать только за себя", 2: "считать организацию других утомительной задачей", 3: "брать на себя лидерство в малых группах", 4: "чувствовать драйв в менеджменте и координации", 5: "выстраивать сложные системы как прирожденный управленец" },
            kz: { 1: "орындаушы болу және тек өзі үшін жауап беру", 2: "басқаларды ұйымдастыруды шаршататын іс деп санау", 3: "шағын топтарда көшбасшылықты өз қолына алу", 4: "менеджмент пен үйлестіруде драйв сезіну", 5: "кез келген күрделі жүйені құра білу" }
        }
    },
    { 
        id: 16, block: 'B2', 
        ru: "Мне нравится искать ответы на сложные вопросы и проводить исследования.", 
        kz: "Күрделі сұрақтарға жауап іздеу және зерттеу жасағанды ұнатамын.", 
        impact: { ru: "исследовать сложные вопросы и искать ответы", kz: "күрделі сұрақтарға жауап іздеу және зерттеу" },
        nuances: {
            ru: { 1: "выбирать простые и понятные практические задачи", 2: "считать исследования оторванными от реальности", 3: "узнавать новое в рамках своей профессии", 4: "глубоко погружаться в поиск истины", 5: "постоянно искать ответы как ученый по своей сути" },
            kz: { 1: "қарапайым и түсінікті практикалық тапсырмаларды таңдау", 2: "зерттеулерді шындықтан алшақ деп санау", 3: "өз мамандығы шеңберінде жаңа нәрселерді білу", 4: "шындықты іздеуге терең бойлау", 5: "мәні бойынша ғалым ретінде үнемі жауап іздеу" }
        }
    },
    { 
            id: 17, block: 'B2', 
            ru: "Темы политики, экономики, бизнеса или права мне интересны.", 
            kz: "Саясат, экономика, бизнес немесе құқық тақырыптары маған қызықты.", 
            impact: { ru: "изучать вопросы бизнеса, экономики и права", kz: "бизнес, экономика және құқық мәселелерін зерттеу" },
            nuances: {
                ru: { 1: "интересоваться искусством, технологиями или природой", 2: "считать социально-экономические темы скучными", 3: "понимать базовые механизмы общества", 4: "разбираться в устройстве мира и власти", 5: "реализовываться в сфере бизнеса, стратегии и права" },
                kz: { 1: "өнер, технология немесе табиғатқа қызығушылық таныту", 2: "әлеуметтік-экономикалық тақырыптарды іш пыстырарлық деп санау", 3: "қоғамның негізгі тетіктерін түсіну", 4: "әлем мен биліктің құрылымын түсінуге ұмтылу", 5: "бизнес, стратегия және құқық саласында өзін көрсету" }
            }
        },
    { 
        id: 18, block: 'B2', 
        ru: "Работа с природой, экологией или животными приносит радость.", 
        kz: "Табиғатпен, экологиямен немесе жануарлармен жұмыс істеу қуаныш сыйлайды.", 
        impact: { ru: "заботиться о природе и экологии", kz: "табиғат пен экологияға қамқорлық жасау" },
        nuances: {
            ru: { 1: "выбирать урбанистическую среду и высокие технологии", 2: "видеть в природе только место для отдыха", 3: "заботиться об экологии на бытовом уровне", 4: "чувствовать связь с живым миром в деятельности", 5: "видеть своей миссией защиту планеты" },
            kz: { 1: "урбанистік ортаны және жоғары технологияларды таңдау", 2: "табиғатты тек демалыс орны ретінде көру", 3: "тұрмыстық деңгейде экологияға қамқорлық жасау", 4: "өз қызметінде тірі әлеммен байланысты сезіну", 5: "планетаны қорғауды өз миссиясы деп санау" }
        }
    },
    { 
        id: 19, block: 'B2', 
        ru: "Мне нравится выступать на публике или быть в центре внимания.", 
        kz: "Көпшілік алдында сөйлеген немесе назарда болған ұнайды.", 
        impact: { ru: "выступать публично и быть в центре внимания", kz: "көпшілік алдында сөйлеу және назарда болу" },
        nuances: {
            ru: { 1: "оставаться в тени и работать за кулисами", 2: "испытывать дискомфорт от публичности", 3: "выступать при необходимости для дела", 4: "уверенно чувствовать себя перед аудиторией", 5: "быть в своей стихии на сцене и под вниманием публики" },
            kz: { 1: "көлеңкеде қалу және «сахна сыртында» жұмыс істеу", 2: "жариялылықтан ыңғайсыздық сезіну", 3: "іс үшін қажет болса, көпшілік алдында сөйлеу", 4: "аудитория алдында өзін сенімді сезіну", 5: "сахнада және халық назарында өз ортасында болу" }
        }
    },
    { 
        id: 20, block: 'B2', 
        ru: "Изучение языков и путешествия — мои большие увлечения.", 
        kz: "Тілдерді үйрену және саяхаттау — менің үлкен қызығушылығым.", 
        impact: { ru: "изучать языки и познавать другие культуры", kz: "тілдерді үйрену және басқа мәдениеттерді тану" },
        nuances: {
            ru: { 1: "выбирать оседлый образ жизни и родной язык", 2: "считать путешествия лишь кратковременным хобби", 3: "быть открытым новому опыту и культурам", 4: "расширять горизонты через языки и поездки", 5: "быть космополитом в мировом контексте" },
            kz: { 1: "тұрақты өмір салтын және ана тілін таңдау", 2: "саяхаттауды тек қысқа мерзімді хобби деп санау", 3: "жаңа тәжірибе мен мәдениеттерге ашық болу", 4: "тілдер мен сапарлар арқылы көкжиекті кеңейту", 5: "әлемдік контексте космополит болу" }
        }
    },

    // ---------------- 3-блок: Мотивация / Drive ---------------- 
    { 
        id: 21, block: 'B3', 
        ru: "Если дело интересно, я готов заниматься им бесплатно.", 
        kz: "Егер іс қызықты болса, онымен ақысыз да айналысуға дайынмын.", 
        impact: { ru: "быть внутренне увлеченным делом", kz: "іске іштей берілген болу" },
        nuances: {
            ru: { 1: "критически ценить материальную компенсацию за любой труд", 2: "редко заниматься чем-то только ради интереса", 3: "быть готовым на волонтерство для развития навыков", 4: "считать энтузиазм мощным двигателем и работать за идею", 5: "ставить страсть к делу выше финансовых интересов" },
            kz: { 1: "кез келген еңбек үшін материалдық өтемақыны өте жоғары бағалау", 2: "тек қызығушылық үшін бірдеңемен сирек айналысу", 3: "дағдыларды дамыту үшін волонтерлікке дайын болу", 4: "ынтаны қуатты қозғалтқыш деп санау және идея үшін жұмыс істеу", 5: "іске деген құштарлықты қаржылық мүдделерден жоғары қою" }
        }
    },
    { 
        id: 22, block: 'B3', 
        ru: "Для меня важны высокий статус в обществе и финансовый доход.", 
        kz: "Маған қоғамдағы жоғары мәртебе (статус) және қаржылық табыс маңызды.", 
        impact: { ru: "стремиться к успеху и статусу", kz: "жетістік пен мәртебеге ұмтылу" },
        nuances: {
            ru: { 1: "не считать статус и деньги мерилом успеха", 2: "предпочитать скромную и спокойную жизнь без амбиций", 3: "стремиться к достойному заработку без погони за брендами", 4: "считать признание и благополучие главными ориентирами", 5: "достигать вершины социальной и финансовой лестницы" },
            kz: { 1: "мәртебе мен ақшаны табыстың өлшемі деп санамау", 2: "амбициясыз қарапайым және тыныш өмірді қалау", 3: "брендтердің соңынан ермей, лайықты табысқа ұмтылу", 4: "танылу мен әл-ауқатты басты бағдарлар деп санау", 5: "әлеуметтік және қаржылық сатының шыңына жету" }
        }
    },
    { 
        id: 23, block: 'B3', 
        ru: "Профессиональные трудности меня не останавливают, а наоборот мотивируют.", 
        kz: "Кәсіби қиындықтар мені тоқтатпайды, қайта жігерлендіреді.", 
        impact: { ru: "преодолевать трудности как вызов", kz: "қиындықтарды сын ретінде жеңу" },
        nuances: {
            ru: { 1: "быстро терять интерес при слишком сложных задачах", 2: "предпочитать предсказуемую работу без стрессовых вызовов", 3: "быть готовым решать проблемы при поддержке со стороны", 4: "чувствовать азарт и желание доказать свою силу в трудностях", 5: "расцветать в условиях кризиса и сверхсложных задач" },
            kz: { 1: "тапсырма тым қиын болса, қызығушылықты тез жоғалту", 2: "стресстік қиындықтарсыз болжамды жұмысты қалау", 3: "қолдау болса, мәселелерді шешуге дайын болу", 4: "қиындықтарда құмарлықты сезіну және өз күшін дәлелдеуге ұмтылу", 5: "дағдарыс пен өте күрделі тапсырмалар жағдайында өзін жақсы сезіну" }
        }
    },
    { 
        id: 24, block: 'B3', 
        ru: "Мне дает силы видеть, что моя работа меняет жизнь людей.", 
        kz: "Еңбегімнің адамдар өмірін өзгертіп жатқаны маған күш береді.", 
        impact: { ru: "мотивироваться социальным вкладом", kz: "әлеуметтік үлеспен ынталану" },
        nuances: {
            ru: { 1: "фокусироваться на технических аспектах, а не на людях", 2: "считать достаточным качественное выполнение плана", 3: "радоваться получению благодарности от клиентов", 4: "стремиться быть частью масштабных социальных изменений", 5: "видеть смысл жизни в служении людям и изменении мира" },
            kz: { 1: "адамдарға емес, техникалық аспектілерге назар аудару", 2: "жоспарды сапалы орындауды жеткілікті деп санау", 3: "клиенттерден алғыс алған кезде қуану", 4: "ауқымды әлеуметтік өзгерістердің бір бөлігі болуға ұмтылу", 5: "өмірдің мәнін адамдарға қызмет етуден және әлемді өзгертуден көру" }
        }
    },
    { 
        id: 25, block: 'B3', 
        ru: "Мне необходимо постоянно учиться новому.", 
        kz: "Маған үнемі жаңа нәрсені үйрену өте қажет.", 
        impact: { ru: "непрерывно обучаться", kz: "үздіксіз оқу" },
        nuances: {
            ru: { 1: "предпочитать использование уже накопленного опыта", 2: "считать обучение тяжелой необходимостью, а не удовольствием", 3: "учиться только при требовании работы или карьерного роста", 4: "постоянно расширять свой кругозор в смежных областях", 5: "быть вечным студентом и требовать постоянной подпитки знаниями" },
            kz: { 1: "жинақталған тәжірибені пайдалануды қалау", 2: "оқуды рахат емес, ауыр қажеттілік деп санау", 3: "тек жұмыс немесе мансап талап еткенде ғана оқу", 4: "үнемі сабақтас салаларда өз көзқарасын кеңейту", 5: "мәңгілік студент болу және үнемі біліммен толығуды талап ету" }
        }
    },
    { 
        id: 26, block: 'B3', 
        ru: "Стабильность и уверенность в будущем для меня на первом месте.", 
        kz: "Тұрақтылық пен болашаққа деген сенімділік мен үшін басты орында.", 
        impact: { ru: "стремиться к стабильности", kz: "тұрақтылыққа ұмтылу" },
        nuances: {
            ru: { 1: "любить риск и неопределенность", 2: "быть готовым часто менять работу и сферу деятельности", 3: "нуждаться в базовом уровне безопасности для продуктивной работы", 4: "ценить долгосрочные гарантии и проверенные компании", 5: "приоритизировать госслужбу или работу в корпорации на десятилетия" },
            kz: { 1: "тәуекел мен белгісіздікті жақсы көру", 2: "жұмысты және қызмет саласын жиі ауыстыруға дайын болу", 3: "өнімді жұмыс істеу үшін қауіпсіздіктің негізгі деңгейіне мұқтаж болу", 4: "ұзақ мерзімді кепілдіктер мен тексерілген компанияларды бағалау", 5: "мемлекеттік қызметті немесе корпорацияда ондаған жылдар бойы жұмыс істеуді басты орынға қою" }
        }
    },
    { 
        id: 27, block: 'B3', 
        ru: "Я хочу быть настоящим мастером в своем деле, эксклюзивным специалистом.", 
        kz: "Өз ісімнің нағыз майталманы, «эксклюзивті» маман болғым келеді.", 
        impact: { ru: "стремиться к экспертности", kz: "сарапшылыққа ұмтылу" },
        nuances: {
            ru: { 1: "предпочитать быть универсалом и знать всего понемногу", 2: "считать глубокое погружение в одну тему скучным", 3: "стремиться к профессионализму без фанатизма", 4: "вкладывать много времени в оттачивание своих навыков", 5: "стать лучшим в мире экспертом в узкой нише" },
            kz: { 1: "универсал болуды және барлық нәрседен аз-аздап білуді қалау", 2: "бір тақырыпқа терең бойлауды іш пыстырарлық деп санау", 3: "фанатизмсіз кәсібилікке ұмтылу", 4: "өз дағдыларын шыңдауға көп уақыт жұмсау", 5: "тар салада әлемдегі ең үздік сарапшы болуды мақсат ету" }
        }
    },
    { 
        id: 28, block: 'B3', 
        ru: "Мне нужна свобода действий и независимость на работе.", 
        kz: "Маған жұмыста әрекет ету еркіндігі мен тәуелсіздік керек.", 
        impact: { ru: "нуждаться в автономии", kz: "автономияға мұқтаж болу" },
        nuances: {
            ru: { 1: "любить четкие указания и контроль результата", 2: "опасаться самостоятельности из-за груза ответственности", 3: "ценить автономию в рамках поставленной задачи", 4: "комфортно работать удаленно или на фрилансе", 5: "считать любой контроль препятствием и быть свободным художником" },
            kz: { 1: "нақты нұсқауларды және нәтижені бақылауды ұнату", 2: "жауапкершілік жүгіне байланысты тәуелсіздіктен қорқу", 3: "қойылған тапсырма шеңберінде автономияны бағалау", 4: "қашықтан немесе фриланста жұмыс істеуге ыңғайлы болу", 5: "кез келген бақылауды кедергі деп санау және еркін суретші болу" }
        }
    },
    { 
        id: 29, block: 'B3', 
        ru: "Моя цель — управлять крупными проектами или командой.", 
        kz: "Менің мақсатым — үлкен жобаларды немесе ұжымды басқару.", 
        impact: { ru: "иметь лидерские амбиции", kz: "көшбасшылық амбициялары болу" },
        nuances: {
            ru: { 1: "предпочитать отвечать только за свой участок работы", 2: "считать роль руководителя слишком нервной и сложной", 3: "быть готовым лидировать в небольшой группе единомышленников", 4: "стремиться к карьерному росту и управленческим должностям", 5: "считать власть и масштабное управление главной мотивацией" },
            kz: { 1: "тек өз жұмыс учаскесі үшін жауап беруді қалау", 2: "басшы рөлін тым жүйкеге салмақ түсіретін және күрделі деп санау", 3: "пікірлестердің шағын тобында көшбасшылық етуге дайын болу", 4: "мансаптық өсуге және басқарушылық лауазымдарға ұмтылу", 5: "билік пен ауқымды басқаруды басты мотивация деп санау" }
        }
    },
    { 
        id: 30, block: 'B3', 
        ru: "Успех людей, которым я помог, вдохновляет меня.", 
        kz: "Мен көмектескен адамдардың жетістігі мені шабыттандырады.", 
        impact: { ru: "вдохновляться успехом других", kz: "өзгелердің жетістігімен шабыттану" },
        nuances: {
            ru: { 1: "ориентироваться на свои личные достижения и победы", 2: "быть безразличным к влиянию своих действий на успех других", 3: "радоваться за коллег без приписывания этого своей заслуге", 4: "считать наставничество и поддержку других важной частью работы", 5: "измерять свой успех количеством людей, которым помог вырасти" },
            kz: { 1: "өз жетістіктері мен жеңістеріне назар аудару", 2: "іс-әрекеттерінің басқалардың табысына әсеріне немқұрайлы қарау", 3: "мұны өз еңбегім деп санамай, әріптестер үшін қуану", 4: "тәлімгерлік пен басқаларды қолдауды жұмыстың маңызды бөлігі деп санау", 5: "өз табысын өзінің арқасында өскен адамдардың санымен өлшеу" }
        }
    },

    // ---------------- 4-блок: Навыки / Skills ---------------- 
    { 
        id: 31, block: 'B4', 
        ru: "Я легко нахожу ошибки и несоответствия в информации.", 
        kz: "Ақпараттағы қателер мен сәйкессіздіктерді оңай табамын.", 
        impact: { ru: "критически мыслить", kz: "сыни ойлай білу" },
        nuances: {
            ru: { 1: "доверять информации без дополнительной проверки", 2: "замечать только очевидные неточности", 3: "обладать базовым навыком фактчекинга", 4: "быть внимательным контролером и редко упускать детали", 5: "быть настоящим детектором лжи и ошибок в данных" },
            kz: { 1: "ақпаратқа қосымша тексерусіз сенуге бейім болу", 2: "тек айқын сәйкессіздіктерді ғана байқау", 3: "фактчекингтің негізгі дағдысына ие болу", 4: "егжей-тегжейлерді сирек жіберіп алатын мұқият бақылаушы болу", 5: "деректердегі өтірік пен қателердің нағыз детекторы болу" }
        }
    },
    { 
        id: 32, block: 'B4', 
        ru: "Я умею ясно выражать свои мысли и вести за собой людей.", 
        kz: "Ойымды нақты жеткізіп, адамдарды соңымнан ерте аламын.", 
        impact: { ru: "коммуницировать и лидировать", kz: "коммуникация мен көшбасшылық орнату" },
        nuances: {
            ru: { 1: "трудно подбирать слова и убеждать других", 2: "предпочитать слушать, а не говорить", 3: "быть хорошим собеседником и уметь донести свою позицию", 4: "вдохновлять и мотивировать окружающих своей речью", 5: "быть харизматичным лидером, за которым люди идут добровольно" },
            kz: { 1: "сөз табу және басқаларды сендіру қиынға соғу", 2: "сөйлегеннен гөрі тыңдағанды қалау", 3: "өз позициясын жеткізе білетін жақсы сұхбаттас болу", 4: "өз сөзімен айналасындағыларды шабыттандыру және ынталандыру", 5: "адамдар өз еркімен соңынан еретін харизматикалық көшбасшы болу" }
        }
    },
    { 
        id: 33, block: 'B4', 
        ru: "Я хорошо планирую время и координирую дела.", 
        kz: "Уақытты жақсы жоспарлаймын және істерді үйлестіремін.", 
        impact: { ru: "планировать время", kz: "уақытты жоспарлау" },
        nuances: {
            ru: { 1: "часто опаздывать и жить в состоянии хаоса", 2: "считать планирование ограничивающим фактором", 3: "использовать списки дел для поддержания порядка", 4: "эффективно распределять ресурсы и соблюдать дедлайны", 5: "быть мастером продуктивности с выверенным графиком" },
            kz: { 1: "жиі кешігу және хаос жағдайында өмір сүру", 2: "жоспарлауды шектеуші фактор деп санау", 3: "тәртіпті сақтау үшін істер тізімін пайдалану", 4: "ресурстарды тиімді бөлу және дедлайндарды сақтау", 5: "кестесі минутқа дейін есептелген өнімділік шебері болу" }
        }
    },
    { 
        id: 34, block: 'B4', 
        ru: "Я быстро осваиваю новые программы, технику и гаджеты.", 
        kz: "Жаңа бағдарламаларды, техника мен гаджеттерді тез меңгеремін.", 
        impact: { ru: "осваивать технологии", kz: "технологияларды меңгеру" },
        nuances: {
            ru: { 1: "испытывать затруднения и стресс от технологий", 2: "осваивать новое только при необходимости", 3: "быть уверенным пользователем стандартного софта", 4: "любить тестировать новинки как «ранний последователь»", 5: "интуитивно понимать сложную технику с первых минут" },
            kz: { 1: "технологиялардан қиындықтар мен стресс сезіну", 2: "жаңа нәрсені тек қажеттілік болғанда меңгеру", 3: "стандартты бағдарламалардың сенімді пайдаланушысы болу", 4: "жаңалықтарды сынап көруді ұнататын «алғашқы ізбасар» болу", 5: "күрделі техниканы алғашқы минуттардан-ақ түсіну" }
        }
    },
    { 
        id: 35, block: 'B4', 
        ru: "Я чувствую настроение людей и быстро нахожу общий язык.", 
        kz: "Адамдардың көңіл-күйін сеземін және тез тіл табысамын.", 
        impact: { ru: "проявлять эмоциональный интеллект", kz: "эмоциялық интеллект таныту" },
        nuances: {
            ru: { 1: "трудно понимать мотивы и чувства окружающих", 2: "часто сталкиваться с непониманием в общении", 3: "уметь поддерживать вежливый и конструктивный диалог", 4: "быть эмпатичным и легко подстраиваться под собеседника", 5: "быть мастером коммуникации, способным «считать» любого" },
            kz: { 1: "айналасындағылардың мотивтері мен сезімдерін түсіну қиын болу", 2: "қарым-қатынаста жиі түсініспеушілікке тап болу", 3: "сыпайы және конструктивті диалог жүргізе білу", 4: "эмпатия таныту және сұхбаттасқа оңай бейімделу", 5: "кез келген адамды «оқи» алатын қарым-қатынас шебері болу" }
        }
    },
    { 
        id: 36, block: 'B4', 
        ru: "Я сохраняю спокойствие и принимаю быстрые решения в стрессовых ситуациях.", 
        kz: "Стресс кезінде сабыр сақтап, жылдам шешім қабылдай аламын.", 
        impact: { ru: "сохранять стрессоустойчивость", kz: "стреске төзімділік таныту" },
        nuances: {
            ru: { 1: "впадать в панику или ступор при стрессе", 2: "терять продуктивность под давлением", 3: "уметь брать себя в руки после первой реакции", 4: "мобилизовать ресурсы в кризисных ситуациях", 5: "быть абсолютно хладнокровным в критических моментах" },
            kz: { 1: "стресс кезінде абдырап қалу немесе есеңгіреп қалу", 2: "қысым кезінде өнімділікті жоғалту", 3: "алғашқы реакциядан кейін өзін қолға ала білу", 4: "дағдарыстық жағдайларда ресурстарды жұмылдыру", 5: "қиын сәттерде барынша сабырлы болу" }
        }
    },
    { 
        id: 37, block: 'B4', 
        ru: "Я умею делать что-то руками или создавать дизайн.", 
        kz: "Қолмен бірдеңе жасау немесе дизайн құрастыру қолымнан келеді.", 
        impact: { ru: "создавать руками и проектировать", kz: "қолмен жасау және жобалау" },
        nuances: {
            ru: { 1: "предпочитать интеллектуальный труд без физического воплощения", 2: "считать ручной труд утомительным", 3: "иметь склонность к рукоделию или оформлению", 4: "обладать хорошим вкусом и чувством стиля", 5: "иметь талант к созданию визуальной красоты" },
            kz: { 1: "физикалық көрініссіз зияткерлік еңбекті қалау", 2: "қол еңбегін шаршататын іс деп санау", 3: "қолөнерге немесе безендіруге бейімділік болу", 4: "жақсы талғам мен стильді сезіне білу", 5: "визуалды сұлулықты жасауға таланты болу" }
        }
    },
    { 
        id: 38, block: 'B4', 
        ru: "Я быстро выделяю самое важное из большого объема информации.", 
        kz: "Көп ақпараттың ішінен ең маңыздысын тез бөліп аламын.", 
        impact: { ru: "анализировать информацию", kz: "ақпаратты талдау" },
        nuances: {
            ru: { 1: "тонуть в деталях и долго искать суть", 2: "трудно фильтровать информационный шум", 3: "уметь составлять краткие резюме и конспекты", 4: "обладать навыком скорочтения и быстрого анализа", 5: "мгновенно находить суть в любом массиве данных" },
            kz: { 1: "егжей-тегжейлерге батып кету және мәнін ұзақ іздеу", 2: "ақпараттық шуды сүзгіден өткізу қиын болу", 3: "қысқаша түйіндемелер мен конспектілер жасай білу", 4: "жылдам оқу және жылдам талдау дағдысына ие болу", 5: "кез келген деректерден негізгі мәнді бірден табу" }
        }
    },
    { 
        id: 39, block: 'B4', 
        ru: "Я могу эффективно выполнять несколько задач одновременно.", 
        kz: "Бір уақытта бірнеше істі нәтижелі атқара аламын.", 
        impact: { ru: "работать в режиме многозадачности", kz: "көпміндеттілік режимінде жұмыс істеу" },
        nuances: {
            ru: { 1: "предпочитать глубокое погружение в одну задачу", 2: "быстро уставать от переключения между делами", 3: "вести несколько проектов параллельно", 4: "легко жонглировать разными типами деятельности", 5: "быть максимально эффективным в режиме многозадачности" },
            kz: { 1: "бір тапсырмаға терең бойлауды қалау", 2: "істер арасында ауысудан тез шаршау", 3: "бірнеше жобаны параллель жүргізу", 4: "қызметтің әртүрлі түрлерін оңай үйлестіру", 5: "көпміндеттілік режимінде барынша тиімді болу" }
        }
    },
    { 
        id: 40, block: 'B4', 
        ru: "Я умею гасить конфликты и находить компромиссы.", 
        kz: "Кикілжіңдерді (конфликт) басып, ымыраға келуге шебермін.", 
        impact: { ru: "урегулировать конфликты", kz: "жанжалдарды реттеу" },
        nuances: {
            ru: { 1: "быть склонным к агрессии или уходу от споров", 2: "долго восстанавливаться после конфликтов", 3: "стараться быть объективным посредником", 4: "быть прирожденным дипломатом в переговорах", 5: "превращать любое противостояние в сотрудничество" },
            kz: { 1: "агрессияға немесе даудан қашуға бейім болу", 2: "конфликттерден кейін ұзақ қалпына келу", 3: "объективті делдал болуға тырысу", 4: "келіссөздерде туа біткен дипломат болу", 5: "кез келген текетіресті ынтымақтастыққа айналдыру" }
        }
    },

    // ---------------- 5-блок: Среда / Environment ---------------- 
    { 
        id: 41, block: 'B5', 
        ru: "Я лучше работаю, когда сам планирую рабочий график.", 
        kz: "Жұмыс кестесін өзім реттегенде жақсырақ жұмыс істеймін.", 
        impact: { ru: "планировать автономно", kz: "автономиялы түрде жоспарлау" },
        nuances: {
            ru: { 1: "нуждаться в строгом внешнем контроле и графике", 2: "часто прокрастинировать без внешних дедлайнов", 3: "уметь планировать день, но иногда нуждаться в контроле", 4: "быть продуктивным в гибком графике", 5: "быть эффективным self-менеджером без рамок" },
            kz: { 1: "қатаң сыртқы бақылау мен кестеге мұқтаж болу", 2: "сыртқы дедлайндарсыз жұмысты кейінге қалдыру", 3: "күнді жоспарлай білу, бірақ кейде бақылауды қажет ету", 4: "икемді кестеде өнімді болу", 5: "шектеусіз тиімді self-менеджер болу" }
        }
    },
    { 
        id: 42, block: 'B5', 
        ru: "Высокий темп и динамика работы придают мне сил.", 
        kz: "Жұмыстың жоғары қарқыны мен динамикасы маған күш береді.", 
        impact: { ru: "работать в динамичной среде", kz: "динамикалық ортада жұмыс істеу" },
        nuances: {
            ru: { 1: "предпочитать медленный и размеренный темп", 2: "испытывать стресс от спешки и многозадачности", 3: "справляться с ускорением темпа на короткое время", 4: "любить драйв и активное развитие событий", 5: "расцветать в бурном ритме и избегать застоя" },
            kz: { 1: "баяу және бірқалыпты қарқынды қалау", 2: "асығыстық пен көпміндеттіліктен стресс алу", 3: "қысқа мерзімге қарқынның артуына төтеп беру", 4: "драйв пен оқиғалардың белсенді дамуын ұнату", 5: "қарқынды ритмде жақсы жұмыс істеу және тоқыраудан қашу" }
        }
    },
    { 
        id: 43, block: 'B5', 
        ru: "Важно быть частью команды и постоянно взаимодействовать.", 
        kz: "Ұжымның бір бөлігі болу және үнемі араласу мен үшін маңызды.", 
        impact: { ru: "взаимодействовать в команде", kz: "командада жұмыс істеу" },
        nuances: {
            ru: { 1: "быть одиночкой, эффективным только в изоляции", 2: "отвлекаться от задач из-за постоянного общения", 3: "ценить командный дух, но нуждаться в личном пространстве", 4: "считать коллектив главным ресурсом и поддержкой", 5: "достигать успеха через синергию с другими людьми" },
            kz: { 1: "тек оқшауланғанда тиімді болатын жалғыз болу", 2: "үнемі араласудан тапсырмалардан алшақтау", 3: "командалық рухты бағалау, бірақ жеке кеңістікті қажет ету", 4: "ұжымды басты ресурс пен қолдау деп санау", 5: "басқалармен синергия арқылы табысқа жету" }
        }
    },
    { 
        id: 44, block: 'B5', 
        ru: "Мне важно работать по четким правилам и инструкциям.", 
        kz: "Нақты ережелер мен нұсқаулықтар бойынша жұмыс істегенді қалаймын.", 
        impact: { ru: "соблюдать структуру и правила", kz: "құрылым мен ережелерді сақтау" },
        nuances: {
            ru: { 1: "предпочитать полную творческую свободу без правил", 2: "часто нарушать регламенты ради результата", 3: "ценить структуру, но быть готовым к импровизации", 4: "чувствовать безопасность и порядок в инструкциях", 5: "быть идеальным исполнителем в строгой иерархии" },
            kz: { 1: "ережесіз толық шығармашылық еркіндікті қалау", 2: "нәтиже үшін регламенттерді жиі бұзу", 3: "құрылымды бағалау, бірақ импровизацияға дайын болу", 4: "нұсқаулықтардан қауіпсіздік пен тәртіпті сезіну", 5: "қатаң иерархияда мінсіз орындаушы болу" }
        }
    },
    { 
        id: 45, block: 'B5', 
        ru: "Мне интересна международная среда и общение с иностранцами.", 
        kz: "Халықаралық орта және шетелдіктермен байланыс маған қызықты.", 
        impact: { ru: "работать в международной среде", kz: "халықаралық ортада жұмыс істеу" },
        nuances: {
            ru: { 1: "предпочитать работу в локальной и знакомой среде", 2: "испытывать дискомфорт от разницы менталитетов", 3: "быть открытым к разовым контактам с другими культурами", 4: "изучать языки для работы в глобальных компаниях", 5: "чувствовать себя «гражданином мира» в международном масштабе" },
            kz: { 1: "жергілікті және таныс ортада жұмыс істеуді қалау", 2: "менталитет айырмашылығынан ыңғайсыздық сезіну", 3: "басқа мәдениеттермен бір реттік байланысқа ашық болу", 4: "жаһандық компаниялар үшін тілдерді үйрену", 5: "халықаралық ауқымда «әлем азаматы» ретінде сезіну" }
        }
    },
    { 
        id: 46, block: 'B5', 
        ru: "Я хочу, чтобы моя работа была связана с поездками и командировками.", 
        kz: "Жұмысым саяхаттармен және іссапарлармен байланысты болғанын қалаймын.", 
        impact: { ru: "быть мобильным и ездить в командировки", kz: "мобильді болу және іссапарларға шығу" },
        nuances: {
            ru: { 1: "быть домоседом и любить стабильное рабочее место", 2: "считать командировки утомительной тратой времени", 3: "быть готовым к редким поездкам ради важного опыта", 4: "вдохновляться сменой обстановки и новыми идеями", 5: "видеть в постоянных разъездах и новых местах свой стиль жизни" },
            kz: { 1: "тұрақты жұмыс орнын жақсы көретін үйкүшік болу", 2: "іссапарларды уақытты босқа өткізу деп санау", 3: "маңызды тәжірибе үшін сирек сапарларға дайын болу", 4: "ортаның ауысуынан шабыт алу және жаңа идеялар табу", 5: "тұрақты сапарлар мен жаңа жерлерді өз өмір салты ретінде көру" }
        }
    },
    { 
        id: 47, block: 'B5', 
        ru: "Мне нужен офис с современными технологиями.", 
        kz: "Маған ең заманауи технологиялармен жабдықталған орын керек.", 
        impact: { ru: "работать в технологичной среде", kz: "технологиялық ортада жұмыс істеу" },
        nuances: {
            ru: { 1: "быть безразличным к дизайну и оснащенности офиса", 2: "предпочитать уютные, традиционные рабочие места", 3: "ценить базовый комфорт и исправную технику", 4: "повышать лояльность к компании в инновационной среде", 5: "нуждаться в hi-tech условиях и не мочь работать в устаревших" },
            kz: { 1: "кеңсенің дизайны мен жабдықталуына немқұрайлы қарау", 2: "жайлы, дәстүрлі жұмыс орындарын қалау", 3: "негізгі жайлылық пен жарамды техниканы бағалау", 4: "инновациялық ортада компанияға деген адалдықты арттыру", 5: "hi-tech жағдайларды қажет ету және ескірген ортада жұмыс істей алмау" }
        }
    },
    { 
        id: 48, block: 'B5', 
        ru: "Важна «семейная», теплая атмосфера в коллективе.", 
        kz: "Ұжымдағы «отбасылық», жылы атмосфера мен үшін маңызды.", 
        impact: { ru: "создавать комфортную атмосферу", kz: "жайлы атмосфера құру" },
        nuances: {
            ru: { 1: "ценить сугубо деловые, холодные отношения", 2: "считать личные разговоры на работе неуместными", 3: "быть за дружелюбие, но с соблюдением границ", 4: "быть продуктивным при эмоциональном комфорте в группе", 5: "чувствовать себя в кругу близких по духу друзей" },
            kz: { 1: "тек іскерлік, салқын қарым-қатынасты бағалау", 2: "жұмыстағы жеке әңгімелерді орынсыз деп санау", 3: "шекараны сақтай отырып, достық қарым-қатынасты қолдау", 4: "топтағы эмоциялық жайлылықта өнімді болу", 5: "өзін рухы жақын достар ортасында сезіну" }
        }
    },
    { 
        id: 49, block: 'B5', 
        ru: "Я не могу сидеть на месте, мне нужна физическая активность.", 
        kz: "Бір орында отыра алмаймын, физикалық белсенділік керек.", 
        impact: { ru: "работать в активной среде", kz: "белсенді ортада жұмыс істеу" },
        nuances: {
            ru: { 1: "любить сидячую работу и интеллектуальную концентрацию", 2: "быстро терять силы от физических нагрузок", 3: "предпочитать чередовать работу за столом и прогулки", 4: "выбирать работу, связанную с перемещениями и действием", 5: "требовать движения и не быть созданным для офисного кресла" },
            kz: { 1: "отырып істейтін жұмысты және зияткерлік шоғырлануды ұнату", 2: "физикалық жүктемелерден тез шаршау", 3: "үстел басындағы жұмыс пен серуендеуді кезектестіруді қалау", 4: "қозғалыс пен әрекетпен байланысты жұмысты таңдау", 5: "қозғалысты талап ету және кеңсе креслосына жарамау" }
        }
    },
    { 
        id: 50, block: 'B5', 
        ru: "Я хорошо себя чувствую в изменяющейся среде, где есть риск.", 
        kz: "Тәуекелге баруға болатын өзгермелі ортада өзімді жақсы сезінемін.", 
        impact: { ru: "работать в среде с рисками", kz: "тәуекелді ортада жұмыс істеу" },
        nuances: {
            ru: { 1: "проявлять крайнюю осторожность и избегать неопределенности", 2: "испытывать парализующую тревогу от риска", 3: "рисковать только при наличии «плана Б»", 4: "быть активным под влиянием адреналина и неопределенности", 5: "быть авантюристом, ищущим возможности в хаосе" },
            kz: { 1: "өте сақ болу және белгісіздіктен аулақ болу", 2: "тәуекелден қатты үрейлену", 3: "тек «Б жоспары» болғанда ғана тәуекелге бару", 4: "адреналин мен белгісіздік әсерінен белсенді болу", 5: "хаос ішінен мүмкіндіктер іздейтін авантюрист болу" }
        }
    },

    // ---------------- 6-блок: Бейімділік / Superpower ---------------- 
    { 
        id: 51, block: 'B6', 
        ru: "Мастер слова (Лингвистический талант).", 
        kz: "Сөз мергені (Лингвистикалық талант).", 
        impact: { ru: "обладать лингвистическим талантом", kz: "лингвистикалық талантқа ие болу" },
        nuances: {
            ru: { 1: "испытывать трудности с формулировкой мыслей и подбором слов", 2: "предпочитать краткость и избегать публичных выступлений", 3: "грамотно писать и уметь вести переписку", 4: "обладать богатым словарным запасом и чувством языка", 5: "быть прирожденным оратором или писателем, способным убеждать словом" },
            kz: { 1: "ойды тұжырымдау және сөздерді таңдауда қиындық көру", 2: "қысқалықты қалау және көпшілік алдында сөйлеуден қашу", 3: "сауатты жазу және хат алмаса алу", 4: "сөздік қоры бай және тілді жақсы сезіну", 5: "сөзбен сендіре алатын туа біткен шешен немесе жазушы болу" }
        }
    },
    { 
        id: 52, block: 'B6', 
        ru: "Логический сканер (Аналитический талант).", 
        kz: "Логикалық сканер (Аналитикалық талант).", 
        impact: { ru: "обладать аналитическим талантом", kz: "аналитикалық талантқа ие болу" },
        nuances: {
            ru: { 1: "скучать при решении логических задач и алгоритмов", 2: "чаще полагаться на интуицию, чем на расчет", 3: "уметь анализировать данные и находить закономерности", 4: "обладать острым умом и быстро решать сложные головоломки", 5: "мыслить алгоритмами и видеть мир как набор систем и формул" },
            kz: { 1: "логикалық тапсырмалар мен алгоритмдерді шешуде жалығу", 2: "есептеуден гөрі интуицияға көбірек сүйену", 3: "деректерді талдау және заңдылықтарды таба алу", 4: "өткір ақылға ие болу және күрделі жұмбақтарды тез шешу", 5: "алгоритмдермен ойлау және әлемді жүйелер мен формулалар жиынтығы ретінде көру" }
        }
    },
    { 
        id: 53, block: 'B6', 
        ru: "Пространственное восприятие (3D/Визуальный талант).", 
        kz: "Кеңістік көруші (3D/Визуалды талант).", 
        impact: { ru: "обладать визуальным талантом", kz: "визуалды талантқа ие болу" },
        nuances: {
            ru: { 1: "испытывать трудности с ориентированием по картам и воображением объектов", 2: "редко обращать внимание на эстетику и дизайн", 3: "хорошо рисовать схемы и понимать чертежи", 4: "обладать развитым воображением и чувством композиции", 5: "видеть мир в 3D и обладать талантом архитектора или художника" },
            kz: { 1: "картамен бағдарлауда және нысандарды ойша елестетуде қиындық көру", 2: "эстетика мен дизайнға сирек назар аудару", 3: "схемаларды жақсы сызу және сызбаларды түсіну", 4: "дамыған қиял мен композиция сезіміне ие болу", 5: "әлемді 3D форматында көру және архитектор немесе суретші талантына ие болу" }
        }
    },
    { 
        id: 54, block: 'B6', 
        ru: "Телесная ловкость (Кинестетический талант).", 
        kz: "Дене шеберлігі (Кинестетикалық талант).", 
        impact: { ru: "обладать кинестетическим талантом", kz: "кинестетикалық талантқа ие болу" },
        nuances: {
            ru: { 1: "чувствовать себя неловко в физической активности", 2: "иметь слабую мелкую моторику", 3: "любить активные игры и уметь работать руками", 4: "иметь отличную координацию и чувство баланса", 5: "мастерски владеть своим телом на уровне профессионального атлета" },
            kz: { 1: "физикалық белсенділікте өзін ыңғайсыз сезіну", 2: "ұсақ моторикасы әлсіз болу", 3: "белсенді ойындарды ұнату және қолмен жұмыс істей алу", 4: "тамаша координация мен тепе-теңдік сезіміне ие болу", 5: "өз денесін кәсіби атлет деңгейінде шебер меңгеру" }
        }
    },
    { 
        id: 55, block: 'B6', 
        ru: "Музыкальный слух (Музыкальный талант).", 
        kz: "Әуен сезгіш (Музыкалық талант).", 
        impact: { ru: "обладать музыкальным талантом", kz: "музыкалық талантқа ие болу" },
        nuances: {
            ru: { 1: "воспринимать музыку только как фоновый шум", 2: "испытывать трудности с ритмом или запоминанием мелодий", 3: "быть ценителем музыки и обладать базовым слухом", 4: "тонко чувствовать структуру и гармонию звуков", 5: "обладать абсолютным слухом или даром к созданию музыки" },
            kz: { 1: "музыканы тек фондық шу ретінде қабылдау", 2: "ритмге түсу немесе әуендерді есте сақтауда қиындық көру", 3: "музыканы бағалау және негізгі есту қабілетіне ие болу", 4: "дыбыстардың құрылымы мен гармониясын нәзік сезіну", 5: "керемет есту қабілетіне немесе музыка шығару дарынына ие болу" }
        }
    },
    { 
        id: 56, block: 'B6', 
        ru: "Радар эмпатии (Психологический талант).", 
        kz: "Эмпатия «Радары» (Психологиялық талант).", 
        impact: { ru: "обладать психологическим талантом", kz: "психологиялық талантқа ие болу" },
        nuances: {
            ru: { 1: "предпочитать логику эмоциям в отношениях", 2: "считать чужие переживания непонятными", 3: "быть хорошим слушателем и уметь сопереживать", 4: "интуитивно чувствовать ложь и скрытые мотивы людей", 5: "быть «целителем душ», способным глубоко понимать любого человека" },
            kz: { 1: "қарым-қатынаста эмоциялардан гөрі логиканы қалау", 2: "өзгелердің уайымдарын түсініксіз деп санау", 3: "жақсы тыңдаушы болу және жанашырлық таныта алу", 4: "адамдардың өтірігі мен жасырын мотивтерін интуитивті сезіну", 5: "кез келген адамды терең түсіне алатын «жан шипагері» болу" }
        }
    },
    { 
        id: 57, block: 'B6', 
        ru: "Внутренний компас (Личностный талант).", 
        kz: "Ішкі компас (Тұлғаішілік талант).", 
        impact: { ru: "обладать личностным талантом", kz: "тұлғаішілік талантқа ие болу" },
        nuances: {
            ru: { 1: "часто сомневаться в своих целях и ценностях", 2: "испытывать трудности с одиночеством и рефлексией", 3: "хорошо знать свои сильные и слабые стороны", 4: "обладать высокой осознанностью и самодисциплиной", 5: "быть целостной личностью с мощным внутренним стержнем" },
            kz: { 1: "өз мақсаттары мен құндылықтарына жиі күмәндану", 2: "жалғыз қалуда және рефлексия жасауда қиындық көру", 3: "өз мықты және әлсіз жақтарын жақсы білу", 4: "жоғары саналылық пен өзіндік тәртіпке ие болу", 5: "қуатты ішкі өзегі бар тұтас тұлға болу" }
        }
    },
    { 
        id: 58, block: 'B6', 
        ru: "Природный исследователь (Натуралист).", 
        kz: "Табиғат тілшісі (Натуралист).", 
        impact: { ru: "обладать натуралистическим талантом", kz: "натуралистикалық талантқа ие болу" },
        nuances: {
            ru: { 1: "не испытывать особого интереса к природе и животным", 2: "быть типичным жителем мегаполиса, далеким от экологии", 3: "любить проводить время на природе и изучать её", 4: "замечать тонкие связи в экосистемах и любить биологию", 5: "обладать талантом исследователя живой природы" },
            kz: { 1: "табиғат пен жануарларға ерекше қызығушылық танытпау", 2: "экологиядан алыс, мегаполистің типтік тұрғыны болу", 3: "табиғатта уақыт өткізуді және оны зерттеуді ұнату", 4: "экожүйелердегі нәзік байланыстарды байқау және биологияны жақсы көру", 5: "тірі табиғатты зерттеуші талантына ие болу" }
        }
    },
    { 
        id: 59, block: 'B6', 
        ru: "Систематизатор (Организатор).", 
        kz: "Жүйелеуші (Систематизатор).", 
        impact: { ru: "обладать организаторским талантом", kz: "ұйымдастырушылық талантқа ие болу" },
        nuances: {
            ru: { 1: "считать порядок и структуру скучными ограничениями", 2: "часто терять вещи и забывать о планах", 3: "уметь наводить порядок и классифицировать информацию", 4: "эффективно организовывать процессы и работу других людей", 5: "быть гением системности, способным структурировать любой хаос" },
            kz: { 1: "тәртіп пен құрылымды жалықтыратын шектеулер деп санау", 2: "заттарды жиі жоғалту және жоспарларды ұмытып кету", 3: "тәртіп орната алу және ақпаратты жіктей алу", 4: "процестер мен басқа адамдардың жұмысын тиімді ұйымдастыру", 5: "кез келген хаосты жүйелей алатын жүйелілік данышпаны болу" }
        }
    },
    { 
        id: 60, block: 'B6', 
        ru: "Влиятельный (Харизма/Лидер).", 
        kz: "Ықпал етуші (Харизма/Лидер).", 
        impact: { ru: "обладать лидерским талантом", kz: "көшбасшылық талантқа ие болу" },
        nuances: {
            ru: { 1: "предпочитать оставаться в тени и не брать ответственность", 2: "испытывать трудности с тем, чтобы вести за собой и вдохновлять людей", 3: "пользоваться авторитетом в своем кругу общения", 4: "обладать харизмой и навыками убеждения", 5: "быть мощным лидером, способным вести за собой массы" },
            kz: { 1: "көлеңкеде қалуды және жауапкершілік алмауды қалау", 2: "адамдарды соңынан ерту және шабыттандыруда қиындық көру", 3: "өз ортасында беделге ие болу", 4: "харизма мен сендіру дағдыларына ие болу", 5: "қалың көпшілікті соңынан ерте алатын қуатты көшбасшы болу" }
        }
    }
];

const EDUCATION_MAP = {
    ru: {
        'B1B2': {
            unis: ["IITU (Алматы)", "NU (Астана)", "AlmaU (Алматы)"],
            faculty: "Менеджмент и социальное предпринимательство",
            subjects: "География + Математика"
        },
        'B2B3': {
            unis: ["KBTU (Алматы)", "IITU (Алматы)", "AITU (Астана)"],
            faculty: "Информационные технологии / Big Data",
            subjects: "Математика + Физика"
        },
        'B2B5': {
            unis: ["IITU (Алматы)", "KBTU (Алматы)", "AITU (Астана)"],
            faculty: "Разработка ПО / Кибербезопасность",
            subjects: "Математика + Физика"
        },
        'B2B6': {
            unis: ["IITU (Алматы)", "KBTU (Алматы)", "AITU (Астана)"],
            faculty: "Компьютерная инженерия / GameDev",
            subjects: "Математика + Физика"
        },
        'B3B4': {
            unis: ["KIMEP (Алматы)", "Narxoz (Алматы)", "KazGUU (Астана)"],
            faculty: "Бизнес-администрирование / Маркетинг",
            subjects: "Математика + География"
        },
        'B4B5': {
            unis: ["ENU (Астана)", "KazNU (Алматы)", "SDU (Каскелен)"],
            faculty: "Международное право / Аналитика",
            subjects: "Всемирная история + Иностранный язык"
        },
        'B5B6': {
            unis: ["Satbayev University (Алматы)", "NU (Астана)", "AITU (Астана)"],
            faculty: "Робототехника / Искусственный интеллект",
            subjects: "Математика + Физика"
        },
        'B6B1': {
            unis: ["KazNPU (Алматы)", "ENU (Астана)", "Suleyman Demirel University"],
            faculty: "Психология / Педагогика / Филология",
            subjects: "Язык + Литература"
        },
        'fallback': {
            unis: ["Многопрофильные ВУЗы (KazNU, ENU)"],
            faculty: "Общеобразовательные программы",
            subjects: "Определяются по выбору"
        }
    },
    kz: {
        'B1B2': {
            unis: ["IITU (Алматы)", "NU (Астана)", "AlmaU (Алматы)"],
            faculty: "Менеджмент және әлеуметтік кәсіпкерлік",
            subjects: "География + Математика"
        },
        'B2B3': {
            unis: ["KBTU (Алматы)", "IITU (Алматы)", "AITU (Астана)"],
            faculty: "Ақпараттық технологиялар / Big Data",
            subjects: "Математика + Физика"
        },
        'B2B5': {
            unis: ["IITU (Алматы)", "KBTU (Алматы)", "AITU (Астана)"],
            faculty: "БҚ әзірлеу / Киберқауіпсіздік",
            subjects: "Математика + Физика"
        },
        'B2B6': {
            unis: ["IITU (Алматы)", "KBTU (Алматы)", "AITU (Астана)"],
            faculty: "Компьютерлік инженерия / GameDev",
            subjects: "Математика + Физика"
        },
        'B3B4': {
            unis: ["KIMEP (Алматы)", "Narxoz (Алматы)", "KazGUU (Астана)"],
            faculty: "Бизнес-әкімшілік / Маркетинг",
            subjects: "Математика + География"
        },
        'B4B5': {
            unis: ["ENU (Астана)", "KazNU (Алматы)", "SDU (Қаскелең)"],
            faculty: "Халықаралық құқық / Аналитика",
            subjects: "Дүниежүзі тарихы + Шет тілі"
        },
        'B5B6': {
            unis: ["Satbayev University (Алматы)", "NU (Астана)", "AITU (Астана)"],
            faculty: "Робототехника / Жасанды интеллект",
            subjects: "Математика + Физика"
        },
        'B6B1': {
            unis: ["KazNPU (Алматы)", "ENU (Астана)", "Suleyman Demirel University"],
            faculty: "Психология / Педагогика / Филология",
            subjects: "Тіл + Әдебиет"
        },
        'fallback': {
            unis: ["Көпсалалы ЖОО (KazNU, ENU)"],
            faculty: "Жалпы білім беру бағдарламалары",
            subjects: "Таңдау бойынша анықталады"
        }
    }
};

class VProEngine {
    constructor(rawAnswers, lang = 'ru') {
        this.raw = rawAnswers;
        this.lang = lang;
        this.results = {
            block_scores: {},
            superpower_score: 0,
            superpower_desc: "",
            microtalents: {},
            individual_highlights: [],
            cross_check_flags: [],
            profile_type: "",
            education: null
        };
    }

    calculate() {
        const blocks = ['B1', 'B2', 'B3', 'B4', 'B5', 'B6'];
        blocks.forEach(bId => {
            const blockAnswers = this.raw.filter(a => {
                const q = QUESTIONS_DATA.find(q => q.id === a.id);
                return q.block === bId;
            });
            const sum = blockAnswers.reduce((acc, curr) => acc + curr.value, 0);
            const avg = sum / 10;
            const norm = ((avg - 1) / 4) * 100;
            this.results.block_scores[bId] = {
                sum,
                avg: parseFloat(avg.toFixed(2)),
                norm: Math.round(norm)
            };
        });
        
        // Анализ полюсов (5 - пики, 1-2 - зоны отторжения, 3 - зоны гибкости)
        this.results.individual_highlights = this.raw
            .filter(a => [1, 2, 3, 5].includes(a.value))
            .map(a => {
                const q = QUESTIONS_DATA.find(q => q.id === a.id);
                let type = 'peak';
                if (a.value <= 2) type = 'rejection';
                if (a.value === 3) type = 'neutral';
                
                return {
                    id: a.id,
                    value: a.value,
                    type: type,
                    text: q[this.lang],
                    impact: q.impact ? q.impact[this.lang] : '',
                    nuance: q.nuances ? q.nuances[this.lang][a.value] : ''
                };
            });

        const b6Norm = this.results.block_scores['B6'].norm;
        this.results.superpower_score = Math.min(100, Math.round(b6Norm * 1.5));
        
        // Заполнение superpower_desc
        const b6Interp = TRANSLATIONS[this.lang].report.interpretations.B6;
        this.results.superpower_desc = b6Norm > 50 ? b6Interp.high : b6Interp.low;

        for (let qId = 51; qId <= 60; qId++) {
            const answer = this.raw.find(a => a.id === qId);
            const val = answer ? answer.value : 0;
            this.results.microtalents[TRANSLATIONS[this.lang].microtalents[qId]] = {
                raw_value: val,
                status: this.getStatus(val)
            };
        }
        
        this.runCrossCheck();
        this.determineProfileType();
        this.results.education = this.getEducationPath();
        this.results.comprehensive_analysis = this.generateComprehensiveAnalysis();
        this.results.detailed_story = this.generateDetailedStory();
        return this.results;
    }

    generateDetailedStory() {
        const h = this.results.individual_highlights;
        const lang = this.lang;
        
        const sections = [
            {
                title: lang === 'ru' ? 'Твой интеллектуальный стиль' : 'Сенің интеллектуалды стилің',
                ids: [1, 2, 3, 4, 5, 11, 12, 51, 52],
                intro: lang === 'ru' ? 'Ваш способ обработки информации и принятия решений характеризуется особым подходом. ' : 'Сіздің ақпаратты өңдеу және шешім қабылдау тәсіліңіз ерекше тәсілмен сипатталады. '
            },
            {
                title: lang === 'ru' ? 'Отношение к обществу и ценности' : 'Қоғамға деген көзқарас пен құндылықтар',
                ids: [6, 7, 8, 9, 10, 13, 14, 15, 16, 56, 57],
                intro: lang === 'ru' ? 'Взаимодействие с окружающим миром строится на фундаменте ваших внутренних убеждений. ' : 'Қоршаған ортамен өзара әрекеттесу сіздің ішкі сенімдеріңіздің негізінде құрылады. '
            },
            {
                title: lang === 'ru' ? 'Рабочая среда и мотивация' : 'Жұмыс ортасы мен мотивация',
                ids: [21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 53, 58],
                intro: lang === 'ru' ? 'Идеальные условия для вашей продуктивности зависят от того, как вы черпаете энергию. ' : 'Сіздің өнімділігіңіз үшін тамаша жағдайлар энергияны қалай алатыныңызға байланысты. '
            },
            {
                title: lang === 'ru' ? 'Лидерство и ответственность' : 'Көшбасшылық пен жауапкершілік',
                ids: [17, 18, 19, 20, 59, 60],
                intro: lang === 'ru' ? 'Ваш лидерский потенциал и готовность брать на себя обязательства проявляются в следующем. ' : 'Сіздің көшбасшылық әлеуетіңіз бен міндеттемелерді қабылдауға дайындығыңыз келесіде көрінеді. '
            },
            {
                title: lang === 'ru' ? 'Цифровой мир и коммуникации' : 'Цифрлық әлем және коммуникациялар',
                ids: [33, 34, 35, 36, 40],
                intro: lang === 'ru' ? 'В современном мире ваши навыки взаимодействия с технологиями и людьми играют ключевую роль. ' : 'Қазіргі әлемде технологиялармен және адамдармен өзара әрекеттесу дағдыларыңыз басты рөл атқарады. '
            },
            {
                title: lang === 'ru' ? 'Скрытые таланты и анти-таланты' : 'Жасырын таланттар мен анти-таланттар',
                ids: [31, 32, 37, 38, 39, 54, 55],
                intro: lang === 'ru' ? 'Анализ ваших специфических склонностей и зон осознанного отказа открывает интересную картину. ' : 'Сіздің ерекше бейімділіктеріңіз бен саналы түрде бас тарту аймақтарыңызды талдау қызықты суретті ашады. '
            }
        ];

        let story = [];
        const connectors = lang === 'ru' ? 
            [
                'Более того, ', 
                'При этом стоит учитывать, что ', 
                'Важно заметить: ', 
                'Интересно, что ', 
                'В то же время, ', 
                'С другой стороны, ',
                'С точки зрения психологии, ',
                'Анализ показывает, что ',
                'Заслуживает внимания тот факт, что '
            ] :
            [
                'Сонымен қатар, ', 
                'Бұл ретте ескерген жөн, ', 
                'Маңызды ескерту: ', 
                'Қызықтысы, ', 
                'Сонымен бірге, ', 
                'Екінші жағынан, ',
                'Психология тұрғысынан алсақ, ',
                'Талдау көрсеткендей, ',
                'Назар аударуға тұрарлық жайт, '
            ];

        sections.forEach(sec => {
            const icons = {
                'ru': ['🧠', '⚖️', '🔋', '🏆', '🌐', '💎'],
                'kz': ['🧠', '⚖️', '🔋', '🏆', '🌐', '💎']
            };
            const secIcon = icons[lang][sections.indexOf(sec)] || '📍';
            
            let paragraph = `<div class="full-report-text">
                <h3 class="story-subtitle">${secIcon} ${sec.title}</h3>
                <p>${sec.intro}`;
            
            const relevantHighlights = h.filter(item => sec.ids.includes(item.id));
            
            relevantHighlights.forEach((rh, idx) => {
                const conn = idx > 0 ? connectors[idx % connectors.length] : '';
                let text = '';
                
                if (rh.type === 'peak') {
                    text = rh.nuance;
                } else if (rh.type === 'rejection') {
                    if (rh.value === 1) {
                        // Инверсия для балла 1 - грамматически верные конструкции
                        const prefixes = lang === 'ru' ? 
                            [
                                'Для вас не характерно то, что вы ', 
                                'Вы не склонны к тому, чтобы ', 
                                'Вам не близка позиция, при которой вы '
                            ] : 
                            [
                                'Сіз үшін келесі жайт тән емес: сіз ', 
                                'Сіз мынаған бейім емессіз: ', 
                                'Сізге мына позиция жақын емес: сіз '
                            ];
                        const prefix = prefixes[Math.floor(Math.random() * prefixes.length)];
                        text = `${prefix}${rh.nuance.toLowerCase()}`;
                    } else {
                        // Динамичное начало для балла 2
                        const dynamicPrefix = lang === 'ru' ? 
                            (Math.random() > 0.5 ? 'Вы отмечаете, что вам не совсем близко ' : 'Вы скорее дистанцируетесь от того, чтобы ') : 
                            (Math.random() > 0.5 ? 'Сіз өзіңізге аса жақын емес екенін атап өтесіз: ' : 'Сіз мынадан алшақтауды жөн көресіз: ');
                        text = `${dynamicPrefix}${rh.nuance.toLowerCase()}`;
                    }
                } else {
                    const neutralPrefix = lang === 'ru' ? 'Вы проявляете определенную гибкость в вопросе ' : 'Сіз бұл мәселеде белгілі бір икемділік танытасыз: ';
                    text = `${neutralPrefix}${rh.nuance.toLowerCase()}`;
                }
                
                paragraph += conn + text + " ";
            });
            
            paragraph += `</p></div>`;
            story.push(paragraph);
        });

        return story.join("");
    }

    generateComprehensiveAnalysis() {
        let analysis = [];
        const t = TRANSLATIONS[this.lang];
        
        // 1. Общий разбор по блокам
        analysis.push(`<h3>${this.lang === 'ru' ? 'Глубокий факторный анализ' : 'Терең факторлық талдау'}</h3>`);
        
        let neutralCount = 0;
        this.raw.forEach(ans => {
            if (ans.value === 3) neutralCount++;
        });

        const neutralPercent = (neutralCount / QUESTIONS_DATA.length) * 100;

        // Группировка по блокам для связности
        const blocks = ['B1', 'B2', 'B3', 'B4', 'B5', 'B6'];
        blocks.forEach(bId => {
            const blockQuestions = QUESTIONS_DATA.filter(q => q.block === bId);
            let blockText = `<p style="text-align: justify;"><strong>${t.blockNames[bId]}:</strong> `;
            
            blockQuestions.forEach(q => {
                const ans = this.raw.find(a => a.id === q.id);
                if (ans && q.nuances && q.nuances[this.lang]) {
                    blockText += q.nuances[this.lang][ans.value] + " ";
                }
            });
            blockText += `</p>`;
            analysis.push(blockText);
        });

        // 2. Зона неопределенности
        if (neutralPercent > 40) {
            analysis.push(`<h3>${this.lang === 'ru' ? 'Зона неопределенности' : 'Анықталмағандық аймағы'}</h3>`);
            analysis.push(`<p style="text-align: justify;">${this.lang === 'ru' ? 
                `Высокий процент нейтральных ответов (${Math.round(neutralPercent)}%) указывает на этап активного поиска. Сейчас вы находитесь в "точке обнуления", когда старые интересы уже не вдохновляют, а новые еще не сформированы. Это отличное время для экспериментов и проб в разных сферах без страха ошибки.` : 
                `Бейтарап жауаптардың жоғары пайызы (${Math.round(neutralPercent)}%) белсенді ізденіс кезеңін көрсетеді. Қазір сіз «нөлдік нүктеде» тұрсыз, ескі қызығушылықтар бұрынғыдай шабыттандырмайды, ал жаңалары әлі қалыптаспаған. Бұл қателесуден қорықпай, әртүрлі салаларда эксперимент жасаудың тамаша уақыты.`}</p>`);
        }

        // 3. Внутренние конфликты и противоречия
        const b1Norm = this.results.block_scores['B1'].norm;
        const b3Norm = this.results.block_scores['B3'].norm;
        const b4Norm = this.results.block_scores['B4'].norm;

        // Конфликт 1: Энергия без вектора
        if (b3Norm > 70 && b1Norm < 40) {
            analysis.push(`<h3>${this.lang === 'ru' ? 'Внутренний конфликт: Энергия без вектора' : 'Ішкі қайшылық: Векторсыз энергия'}</h3>`);
            analysis.push(`<p style="text-align: justify;">${this.lang === 'ru' ? 
                "У вас очень высокий уровень мотивации и драйва, но при этом система ценностей еще не до конца сформирована. Это может привести к «выгоранию», так как вы тратите много сил на цели, которые не имеют для вас глубокого личного смысла. Рекомендуется сфокусироваться на поиске своего «Зачем?», прежде чем переходить к активным действиям." : 
                "Сізде мотивация мен драйв деңгейі өте жоғары, бірақ сонымен бірге құндылықтар жүйесі әлі толық қалыптаспаған. Бұл «жанып кетуге» әкелуі мүмкін, өйткені сіз өзіңіз үшін терең жеке мағынасы жоқ мақсаттарға көп күш жұмсайсыз. Белсенді әрекеттерге көшпес бұрын өзіңіздің «Не үшін?» деген сұрағыңызға жауап іздеуге назар аудару ұсынылады."}</p>`);
        }

        // Конфликт 2: Лидерство без самоконтроля
        const leadership = this.raw.find(a => a.id === 60)?.value || 0;
        const selfAwareness = this.raw.find(a => a.id === 57)?.value || 0;
        if (leadership >= 4 && selfAwareness <= 2) {
            analysis.push(`<h3>${this.lang === 'ru' ? 'Противоречие: Внешнее влияние vs Внутренняя хрупкость' : 'Қайшылық: Сыртқы ықпал және Ішкі нәзіктік'}</h3>`);
            analysis.push(`<p style="text-align: justify;">${this.lang === 'ru' ? 
                "Вы обладаете сильным лидерским потенциалом, но вам может не хватать внутреннего спокойствия и самопонимания. Настоящий лидер начинается с управления собой. Рекомендуется развивать навыки рефлексии и эмоционального интеллекта." : 
                "Сізде күшті көшбасшылық әлеует бар, бірақ сізге ішкі тыныштық пен өзін-өзі түсіну жетіспеуі мүмкін. Нағыз көшбасшы өзін-өзі басқарудан басталады. Рефлексия мен эмоционалды интеллект дағдыларын дамыту ұсынылады."}</p>`);
        }

        // Конфликт 3: Интеллектуальный парадокс
        const analyticsTalent = this.raw.find(a => a.id === 52)?.value || 0;
        const analyticsInterest = this.raw.find(a => a.id === 12)?.value || 0;
        if (analyticsTalent >= 4 && analyticsInterest <= 2) {
            analysis.push(`<h3>${this.lang === 'ru' ? 'Интеллектуальный парадокс' : 'Интеллектуалды парадокс'}</h3>`);
            analysis.push(`<p style="text-align: justify;">${this.lang === 'ru' ? 
                "У вас есть природный дар к анализу и поиску закономерностей, но сейчас эта сфера не вызывает у вас интереса. Возможно, вы еще не нашли ту область (бизнес, наука, IT), где ваш мощный ум мог бы развернуться на полную мощность." : 
                "Сізде талдау жасауға және заңдылықтарды іздеуге табиғи дарын бар, бірақ қазір бұл сала сізде қызығушылық тудырмайды. Мүмкін сіз өзіңіздің өткір ақылыңыз толық қуатында жұмыс істей алатын саланы (бизнес, ғылым, IT) әлі таппаған боларсыз."}</p>`);
        }

        // Конфликт 4: Социальная дистанция
        const socialSkills = b4Norm;
        const empathy = this.raw.find(a => a.id === 56)?.value || 0;
        if (socialSkills > 70 && empathy <= 2) {
            analysis.push(`<h3>${this.lang === 'ru' ? 'Противоречие: Техничная коммуникация' : 'Қайшылық: Техникалық коммуникация'}</h3>`);
            analysis.push(`<p style="text-align: justify;">${this.lang === 'ru' ? 
                "Вы мастерски владеете инструментами общения, но склонны держать эмоциональную дистанцию. Это профиль эффективного переговорщика или кризис-менеджера, который может принимать жесткие решения, не вовлекаясь в чувства других." : 
                "Сіз қарым-қатынас құралдарын шебер меңгергенсіз, бірақ эмоционалды қашықтықты сақтауға бейімсіз. Бұл — басқалардың сезіміне берілмей, қатаң шешімдер қабылдай алатын тиімді келіссөзші немесе дағдарыс менеджерінің профилі."}</p>`);
        }

        return analysis.join("");
    }

    getStatus(val) {
        const labels = this.lang === 'ru' ? 
            ["Слабый", "Нейтральный", "Выраженный", "Доминантный"] : 
            ["Әлсіз", "Бейтарап", "Айқын", "Басым"];
        if (val <= 2) return labels[0];
        if (val === 3) return labels[1];
        if (val === 4) return labels[2];
        return labels[3];
    }

    runCrossCheck() {
        const b3Norm = this.results.block_scores['B3'].norm;
        const b5Norm = this.results.block_scores['B5'].norm;
        const msgs = this.lang === 'ru' ? 
            ["Потенциал без реализации", "Стабильный профиль"] : 
            ["Жүзеге асырылмаған әлеует", "Тұрақты профиль"];

        Object.entries(this.results.microtalents).forEach(([name, data]) => {
            if (data.raw_value >= 4) {
                if (b3Norm < 60 && b5Norm < 60) this.results.cross_check_flags.push(`${name}: ${msgs[0]}`);
                else if (b3Norm >= 70 && b5Norm >= 70) this.results.cross_check_flags.push(`${name}: ${msgs[1]}`);
            }
        });
    }

    getEducationPath() {
        const sorted = Object.entries(this.results.block_scores).sort((a, b) => b[1].norm - a[1].norm);
        const top1 = sorted[0][0];
        const top2 = sorted[1][0];
        const key = top1 + top2;
        const revKey = top2 + top1;
        
        return EDUCATION_MAP[this.lang][key] || EDUCATION_MAP[this.lang][revKey] || EDUCATION_MAP[this.lang].fallback;
    }

    determineProfileType() {
        const sorted = Object.entries(this.results.block_scores).sort((a, b) => b[1].norm - a[1].norm);
        const top1 = sorted[0][0];
        const top2 = sorted[1][0];
        
        // Проверка на "Нулевой" профиль
        if (this.results.block_scores[top1].norm < 20) {
            this.results.profile_type = this.lang === 'ru' ? "В поиске ориентиров" : "Бағыт іздеу үстінде";
            return;
        }

        const profiles = {
            ru: {
                'B1B2': "Социальный Лидер",
                'B2B3': "Технический Эксперт",
                'B2B5': "Кибер-Специалист",
                'B2B6': "Разработчик Систем",
                'B3B4': "Креативный Предприниматель",
                'B4B5': "Системный Аналитик",
                'B5B6': "Инновационный Исследователь",
                'B6B1': "Гуманитарный Деятель"
            },
            kz: {
                'B1B2': "Әлеуметтік көшбасшы",
                'B2B3': "Техникалық сарапшы",
                'B2B5': "Кибер-маман",
                'B2B6': "Жүйелерді әзірлеуші",
                'B3B4': "Шығармашылық кәсіпкер",
                'B4B5': "Жүйелік аналитик",
                'B5B6': "Инновациялық зерттеуші",
                'B6B1': "Гуманитарлық қайраткер"
            }
        };

        const key = top1 + top2;
        const fallback = this.lang === 'ru' ? "Универсальный профиль" : "Әмбебап профиль";
        this.results.profile_type = profiles[this.lang][key] || profiles[this.lang][top2 + top1] || fallback;
    }
}

const App = {
    lang: 'ru',
    currentIdx: 0,
    answers: [],
    chart: null,

    init() {
        this.cacheDOM();
        this.bindEvents();
        this.updateUI();
    },

    cacheDOM() {
        this.screens = {
            welcome: document.getElementById('screen-welcome'),
            test: document.getElementById('screen-test'),
            result: document.getElementById('screen-result')
        };
        this.ui = {
            progressBar: document.getElementById('progress-bar'),
            stepCounter: document.getElementById('step-counter'),
            questionText: document.getElementById('question-text'),
            options: document.getElementById('options-container'),
            reportSummary: document.getElementById('result-summary'),
            detailedAnalysis: document.getElementById('detailed-analysis'),
            individualHighlights: document.getElementById('individual-highlights'),
            educationMap: document.getElementById('education-map'),
            recommendations: document.getElementById('recommendations-content'),
            radarCanvas: document.getElementById('radarChart'),
            reportTitles: document.querySelectorAll('.report-title')
        };
        this.btns = {
            start: document.getElementById('start-btn'),
            restart: document.getElementById('restart-btn'),
            download: document.getElementById('download-btn'),
            ru: document.getElementById('lang-ru'),
            kz: document.getElementById('lang-kz'),
            back: document.getElementById('back-btn')
        };
    },

    bindEvents() {
        this.btns.start.onclick = () => this.start();
        this.btns.restart.onclick = () => location.reload();
        this.btns.download.onclick = () => this.download();
        this.btns.ru.onclick = () => this.setLang('ru');
        this.btns.kz.onclick = () => this.setLang('kz');
        this.btns.back.onclick = () => this.goBack();
    },

    goBack() {
        if (this.currentIdx > 0) {
            this.currentIdx--;
            this.answers.pop();
            this.renderQ();
        }
    },

    setLang(lang) {
        this.lang = lang;
        this.btns.ru.classList.toggle('active', lang === 'ru');
        this.btns.kz.classList.toggle('active', lang === 'kz');
        this.updateUI();
        if (this.screens.test.classList.contains('active')) this.renderQ();
    },

    updateUI() {
        const t = TRANSLATIONS[this.lang];
        document.getElementById('welcome-title').textContent = t.welcomeTitle;
        document.getElementById('welcome-subtitle').textContent = t.welcomeSubtitle;
        document.getElementById('feat-1').textContent = t.feat1;
        document.getElementById('feat-2').textContent = t.feat2;
        document.getElementById('feat-3').textContent = t.feat3;
        this.btns.start.textContent = t.startBtn;
        this.btns.restart.textContent = t.restartBtn;
        this.btns.download.textContent = t.downloadBtn;
        
        const resultH2 = document.querySelector('#screen-result h2');
        if (resultH2) resultH2.textContent = t.resultTitle;
    },

    start() {
        this.currentIdx = 0;
        this.answers = [];
        this.show('test');
        this.renderQ();
    },

    show(name) {
        Object.values(this.screens).forEach(s => {
            s.classList.remove('active');
            s.style.display = 'none';
        });
        const target = this.screens[name];
        target.style.display = 'block';
        setTimeout(() => target.classList.add('active'), 10);
        window.scrollTo({ top: 0, behavior: 'smooth' });
    },

    renderQ() {
        const q = QUESTIONS_DATA[this.currentIdx];
        this.ui.questionText.textContent = q[this.lang];
        
        // Показ/скрытие кнопки назад
        this.btns.back.classList.toggle('hidden', this.currentIdx === 0);
        
        const prog = Math.round((this.currentIdx / QUESTIONS_DATA.length) * 100);
        this.ui.progressBar.style.width = `${prog}%`;
        this.ui.stepCounter.textContent = `${prog}%`;

        this.ui.options.innerHTML = '';
        TRANSLATIONS[this.lang].likert.forEach((text, i) => {
            const btn = document.createElement('button');
            btn.className = 'option-btn likert-btn';
            btn.innerHTML = `<span class="likert-val">${i + 1}</span><span>${text}</span>`;
            btn.onclick = () => this.handle(i + 1);
            this.ui.options.appendChild(btn);
        });
    },

    handle(val) {
        this.answers.push({ id: QUESTIONS_DATA[this.currentIdx].id, value: val });
        if (this.currentIdx < QUESTIONS_DATA.length - 1) {
            this.currentIdx++;
            this.renderQ();
        } else {
            this.finish();
        }
    },

    finish() {
        this.ui.progressBar.style.width = '100%';
        this.ui.stepCounter.textContent = '100%';
        const res = new VProEngine(this.answers, this.lang).calculate();
        this.renderRes(res);
        this.show('result');
    },

    renderRes(res) {
        const t = TRANSLATIONS[this.lang];
        const r = RULES[this.lang];
        
        // Обновление заголовков отчета
        if (this.ui.reportTitles.length >= 3) {
            this.ui.reportTitles[0].textContent = t.resultTitle;
            this.ui.reportTitles[1].textContent = t.page2Title;
            this.ui.reportTitles[2].textContent = t.page3Title;
        }

        // 1. Сводка (Page 1)
        this.ui.reportSummary.innerHTML = `
            <div class="result-profile">
                <span class="profile-label">${this.lang === 'ru' ? 'Ваш профиль:' : 'Сіздің профиліңіз:'}</span>
                <h3 class="profile-type">${res.profile_type}</h3>
            </div>
            <div class="superpower-highlight">
                <h4>🚀 ${this.lang === 'ru' ? 'Ваша Суперсила' : 'Сіздің Суперкүшіңіз'}</h4>
                <p>${res.superpower_desc}</p>
            </div>
        `;

        // 2. Детальный анализ (Page 2 - Psychological Portrait)
        this.ui.detailedAnalysis.innerHTML = res.comprehensive_analysis || '';
        
        // Добавление блока "Интеллектуальный парадокс" (если применимы RULES)
        const activeParadoxes = RULES[this.lang].filter(rule => rule.condition(res.block_scores));
        if (activeParadoxes.length > 0) {
            const paradoxHtml = activeParadoxes.map(p => `
                <div class="paradox-card mt-6">
                    <h4 class="text-primary">🧩 ${p.title}</h4>
                    <p style="text-align: justify; font-style: italic;">${p.description}</p>
                </div>
            `).join('');
            this.ui.detailedAnalysis.innerHTML += paradoxHtml;
        }
        
        // 3. Психологический нарратив (Page 2)
        this.ui.individualHighlights.innerHTML = `
            <div class="narrative-section mt-6">
                ${res.detailed_story}
            </div>
        `;

        // 4. Карта образования (Page 3)
        if (res.profile_type === (this.lang === 'ru' ? "В поиске ориентиров" : "Бағыт іздеу үстінде")) {
            // Скрываем ВУЗы и профессии, показываем диагностическую карту
            this.ui.educationMap.innerHTML = `
                <div class="diagnostic-card">
                    <h3>📋 ${this.lang === 'ru' ? 'Диагностическая карта для интервью' : 'Интервьюге арналған диагностикалық карта'}</h3>
                    <p style="text-align: justify;">${this.lang === 'ru' ? 
                        "Ваш профиль на данный момент не имеет четко выраженных пиков, что является нормальным этапом для подросткового возраста. Это не отсутствие талантов, а состояние «чистого листа». Для определения вектора рекомендуется обсудить с профориентологом следующие вопросы:" : 
                        "Қазіргі уақытта сіздің профиліңізде нақты көрсетілген шыңдар жоқ, бұл жасөспірімдік кезең үшін қалыпты жағдай. Бұл таланттардың жоқтығы емес, «таза парақ» күйі. Бағытты анықтау үшін профориентологпен келесі сұрақтарды талқылау ұсынылады:"}</p>
                    
                    <div class="interview-questions mt-4">
                        <div class="q-item">
                            <strong>1. ${this.lang === 'ru' ? 'Какие школьные предметы даются легче всего, даже если они не нравятся?' : 'Қандай мектеп пәндері ұнамаса да, оңай беріледі?'}</strong>
                        </div>
                        <div class="q-item mt-2">
                            <strong>2. ${this.lang === 'ru' ? 'В какой деятельности вы теряете счет времени?' : 'Қандай іс-әрекетте уақыттың қалай өткенін байқамай қаласыз?'}</strong>
                        </div>
                        <div class="q-item mt-2">
                            <strong>3. ${this.lang === 'ru' ? 'Что для вас важнее в будущей работе: свобода, деньги или помощь людям?' : 'Болашақ жұмыста сіз үшін не маңызды: бостандық, ақша немесе адамдарға көмектесу?'}</strong>
                        </div>
                        <div class="q-item mt-2">
                            <strong>4. ${this.lang === 'ru' ? 'Какие хобби вы пробовали, но бросили, и почему?' : 'Қандай хоббилерді байқап көрдіңіз, бірақ тастап кеттіңіз және неге?'}</strong>
                        </div>
                    </div>
                </div>
            `;
            this.ui.recommendations.innerHTML = `
                <div class="recommendation-item">
                    <h4>📈 ${this.lang === 'ru' ? 'Стратегия самопознания' : 'Өзін-өзі тану стратегиясы'}</h4>
                    <p style="text-align: justify;">${this.lang === 'ru' ? 
                        "Ваша текущая задача — не выбор конкретной профессии, а накопление личного опыта. Рекомендуется: 1) Пройти 2-3 коротких курса в абсолютно разных сферах (дизайн, программирование, волонтерство); 2) Вести дневник достижений, записывая, от чего вы получили удовольствие; 3) Посетить дни открытых дверей в 3-х разных по профилю ВУЗах для сравнения атмосферы." : 
                        "Сіздің қазіргі міндетіңіз — нақты мамандық таңдау емес, жеке тәжірибе жинақтау. Ұсынылады: 1) Мүлдем басқа салаларда (дизайн, бағдарламалау, еріктілік) 2-3 қысқа курстан өту; 2) Неден ләззат алғаныңызды жазып, жетістіктер күнделігін жүргізу; 3) Атмосфераны салыстыру үшін профилі әртүрлі 3 ЖОО-да ашық есік күндеріне бару."}</p>
                </div>
                <div class="recommendation-item">
                    <h4>🎓 ${this.lang === 'ru' ? 'Заключение эксперта' : 'Сарапшы қорытындысы'}</h4>
                    <p style="text-align: justify;">${this.lang === 'ru' ? 
                        "Сейчас ваш профиль находится в стадии формирования. Главный совет: не торопитесь с выбором узкой ниши. Ваша задача — пробовать разные направления, чтобы найти тот 'отклик', который пока скрыт за нейтральными ответами." : 
                        "Қазіргі уақытта сіздің профиліңіз қалыптасу сатысында. Негізгі кеңес: тар тауашаны таңдауға асықпаңыз. Сіздің міндетіңіз — бейтарап жауаптардың артында әлі де жасырын тұрған «үнді» табу үшін әртүрлі бағыттарды байқап көру."}</p>
                </div>
            `;
        } else {
            const edu = res.education;
            this.ui.educationMap.innerHTML = `
                <div class="edu-card">
                    <h4>🎓 ${this.lang === 'ru' ? 'Рекомендуемые ВУЗы' : 'Ұсынылатын ЖОО'}</h4>
                    <div class="edu-unis">
                        ${edu.unis.map(u => `<span class="uni-badge">${u}</span>`).join('')}
                    </div>
                    <div class="edu-details mt-4">
                        <div class="edu-detail-item">
                            <strong>${this.lang === 'ru' ? 'Факультет' : 'Факультет'}:</strong>
                            <p>${edu.faculty}</p>
                        </div>
                        <div class="edu-detail-item mt-2">
                            <strong>📚 ${this.lang === 'ru' ? 'Профильные предметы ЕНТ' : 'ҰБТ бейіндік пәндері'}:</strong> 
                            <span class="subjects-badge">${edu.subjects}</span>
                        </div>
                    </div>
                </div>
            `;

            // 5. Рекомендации (Page 3)
            const sorted = Object.entries(res.block_scores).sort((a, b) => b[1].norm - a[1].norm);
            const top1 = sorted[0][0];
            const top2 = sorted[1][0];
            const profKey = top1 + top2;
            const professions = r.profs[profKey] || r.profs[top2 + top1] || [];

            this.ui.recommendations.innerHTML = `
                <div class="recommendation-item">
                    <h4>💼 ${this.lang === 'ru' ? 'Рекомендуемые направления' : 'Ұсынылатын бағыттар'}</h4>
                    <div class="prof-list">
                        ${professions.map(p => `<span class="prof-badge">${p}</span>`).join('')}
                    </div>
                </div>
                <div class="recommendation-item">
                    <h4>🎓 ${this.lang === 'ru' ? 'Заключение эксперта' : 'Сарапшы қорытындысы'}</h4>
                    <p style="text-align: justify;">${this.lang === 'ru' ? 
                        `На основе вашего анализа, приоритетным направлением является <strong>${t.blockNames[top1]}</strong>. Вам рекомендуется развивать прикладные навыки в этой сфере через дополнительные курсы и стажировки. Ваша суперсила в сочетании с мотивацией позволит достичь экспертного уровня за 3-5 лет активной практики.` : 
                        `Сіздің талдауыңыз негізінде басым бағыт <strong>${t.blockNames[top1]}</strong> болып табылады. Қосымша курстар мен тағылымдамалар арқылы осы саладағы қолданбалы дағдыларды дамыту ұсынылады. Мотивациямен үйлесетін суперкүшіңіз 3-5 жылдық белсенді тәжірибеден кейін сарапшылық деңгейге жетуге мүмкіндік береді.`}</p>
                </div>
            `;
        }
        
        // Радар-диаграмма
        this.renderRadar(res);
    },

    renderRadar(res) {
        const t = TRANSLATIONS[this.lang];
        const labels = Object.keys(res.block_scores).map(id => t.blockNames[id]);
        const data = Object.values(res.block_scores).map(d => d.norm);

        if (this.chart) this.chart.destroy();
        
        this.chart = new Chart(this.ui.radarCanvas, {
            type: 'radar',
            data: {
                labels: labels,
                datasets: [{
                    label: t.resultTitle,
                    data: data,
                    backgroundColor: 'rgba(37, 99, 235, 0.2)',
                    borderColor: '#2563eb',
                    pointBackgroundColor: '#2563eb',
                    pointBorderColor: '#fff',
                    pointHoverBackgroundColor: '#fff',
                    pointHoverBorderColor: '#2563eb'
                }]
            },
            options: {
                scales: {
                    r: {
                        beginAtZero: true,
                        max: 100,
                        ticks: { stepSize: 20, display: false },
                        grid: { color: '#e2e8f0' },
                        angleLines: { color: '#e2e8f0' },
                        pointLabels: {
                            font: { size: 12, weight: '600' },
                            color: '#1e293b'
                        }
                    }
                },
                plugins: {
                    legend: { display: false }
                },
                maintainAspectRatio: false
            }
        });
    },

    async download() {
        const el = document.getElementById('report-content');
        const btn = this.btns.download;
        const originalText = btn.textContent;
        
        // Визуальная обратная связь
        btn.disabled = true;
        btn.textContent = this.lang === 'ru' ? 'Генерация PDF...' : 'PDF дайындалуда...';

        const opt = {
            margin: 0, 
            filename: `V-Pro_Report_${this.lang.toUpperCase()}.pdf`,
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { 
                scale: 2, 
                useCORS: true, 
                logging: false,
                letterRendering: true,
                windowWidth: 1200 // Фиксированная ширина для корректного рендеринга
            },
            jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' },
            pagebreak: { mode: ['css', 'legacy'] }
        };

        try {
            await html2pdf().set(opt).from(el).save();
        } catch (err) {
            console.error('PDF Generation Error:', err);
            alert(this.lang === 'ru' ? 'Ошибка при создании PDF' : 'PDF жасау кезінде қате кетті');
        } finally {
            btn.disabled = false;
            btn.textContent = originalText;
        }
    }
};

document.addEventListener('DOMContentLoaded', () => App.init());